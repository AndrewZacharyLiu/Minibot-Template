ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"dm_motor.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "control-base/devices/src/dm_motor.c"
  20              		.section	.text.float_to_uint,"ax",%progbits
  21              		.align	1
  22              		.global	float_to_uint
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	float_to_uint:
  28              	.LVL0:
  29              	.LFB142:
   1:control-base/devices/src/dm_motor.c **** #include "dm_motor.h"
   2:control-base/devices/src/dm_motor.c **** #include <stdlib.h>
   3:control-base/devices/src/dm_motor.c **** 
   4:control-base/devices/src/dm_motor.c **** #define DM_MAX_DEVICE (10)
   5:control-base/devices/src/dm_motor.c **** DM_Motor_Handle_t *g_dm_motors[DM_MAX_DEVICE] = {NULL};
   6:control-base/devices/src/dm_motor.c **** uint8_t g_dm_motor_num = 0;
   7:control-base/devices/src/dm_motor.c **** 
   8:control-base/devices/src/dm_motor.c **** /**
   9:control-base/devices/src/dm_motor.c ****  * int float_to_uint(float x, float x_min, float x_max, int bits)
  10:control-base/devices/src/dm_motor.c ****  *
  11:control-base/devices/src/dm_motor.c ****  * convert a float into int by spanning the range of the variable and
  12:control-base/devices/src/dm_motor.c ****  * linearly assign the value
  13:control-base/devices/src/dm_motor.c ****  *
  14:control-base/devices/src/dm_motor.c ****  * Input:
  15:control-base/devices/src/dm_motor.c ****  * float x: the float variable to be converted into int
  16:control-base/devices/src/dm_motor.c ****  * float x_min: the min value of x
  17:control-base/devices/src/dm_motor.c ****  * float x_max: the max value of x
  18:control-base/devices/src/dm_motor.c ****  * int bits: bit number of converted int
  19:control-base/devices/src/dm_motor.c ****  *
  20:control-base/devices/src/dm_motor.c ****  * Output:
  21:control-base/devices/src/dm_motor.c ****  * int: the converted int
  22:control-base/devices/src/dm_motor.c ****  */
  23:control-base/devices/src/dm_motor.c **** int float_to_uint(float x, float x_min, float x_max, int bits)
  24:control-base/devices/src/dm_motor.c **** {
  30              		.loc 1 24 1 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 2


  25:control-base/devices/src/dm_motor.c ****     float span = x_max - x_min;
  35              		.loc 1 25 5 view .LVU1
  36              		.loc 1 25 11 is_stmt 0 view .LVU2
  37 0000 31EE601A 		vsub.f32	s2, s2, s1
  38              	.LVL1:
  26:control-base/devices/src/dm_motor.c ****     float offset = x_min;
  39              		.loc 1 26 5 is_stmt 1 view .LVU3
  27:control-base/devices/src/dm_motor.c ****     return (int)((x - offset) * ((float)((1 << bits) - 1)) / span);
  40              		.loc 1 27 5 view .LVU4
  41              		.loc 1 27 21 is_stmt 0 view .LVU5
  42 0004 30EE600A 		vsub.f32	s0, s0, s1
  43              	.LVL2:
  44              		.loc 1 27 45 view .LVU6
  45 0008 0123     		movs	r3, #1
  46 000a 8340     		lsls	r3, r3, r0
  47              		.loc 1 27 54 view .LVU7
  48 000c 013B     		subs	r3, r3, #1
  49              		.loc 1 27 34 view .LVU8
  50 000e 07EE903A 		vmov	s15, r3	@ int
  51 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
  52              		.loc 1 27 31 view .LVU9
  53 0016 20EE270A 		vmul.f32	s0, s0, s15
  54              		.loc 1 27 60 view .LVU10
  55 001a C0EE017A 		vdiv.f32	s15, s0, s2
  28:control-base/devices/src/dm_motor.c **** }
  56              		.loc 1 28 1 view .LVU11
  57 001e FDEEE77A 		vcvt.s32.f32	s15, s15
  58 0022 17EE900A 		vmov	r0, s15	@ int
  59              	.LVL3:
  60              		.loc 1 28 1 view .LVU12
  61 0026 7047     		bx	lr
  62              		.cfi_endproc
  63              	.LFE142:
  65              		.section	.text.uint_to_float,"ax",%progbits
  66              		.align	1
  67              		.global	uint_to_float
  68              		.syntax unified
  69              		.thumb
  70              		.thumb_func
  72              	uint_to_float:
  73              	.LVL4:
  74              	.LFB143:
  29:control-base/devices/src/dm_motor.c **** 
  30:control-base/devices/src/dm_motor.c **** float uint_to_float(int x_int, float x_min, float x_max, int bits)
  31:control-base/devices/src/dm_motor.c **** {
  75              		.loc 1 31 1 is_stmt 1 view -0
  76              		.cfi_startproc
  77              		@ args = 0, pretend = 0, frame = 0
  78              		@ frame_needed = 0, uses_anonymous_args = 0
  79              		@ link register save eliminated.
  80              		.loc 1 31 1 is_stmt 0 view .LVU14
  81 0000 07EE900A 		vmov	s15, r0	@ int
  32:control-base/devices/src/dm_motor.c ****     /// converts unsigned int to float, given range and number of bits ///
  33:control-base/devices/src/dm_motor.c ****     float span = x_max - x_min;
  82              		.loc 1 33 5 is_stmt 1 view .LVU15
  83              		.loc 1 33 11 is_stmt 0 view .LVU16
  84 0004 70EEC00A 		vsub.f32	s1, s1, s0
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 3


  85              	.LVL5:
  34:control-base/devices/src/dm_motor.c ****     float offset = x_min;
  86              		.loc 1 34 5 is_stmt 1 view .LVU17
  35:control-base/devices/src/dm_motor.c ****     return ((float)x_int) * span / ((float)((1 << bits) - 1)) + offset;
  87              		.loc 1 35 5 view .LVU18
  88              		.loc 1 35 13 is_stmt 0 view .LVU19
  89 0008 F8EEE77A 		vcvt.f32.s32	s15, s15
  90              		.loc 1 35 27 view .LVU20
  91 000c 27EEA07A 		vmul.f32	s14, s15, s1
  92              		.loc 1 35 48 view .LVU21
  93 0010 0123     		movs	r3, #1
  94 0012 8B40     		lsls	r3, r3, r1
  95              		.loc 1 35 57 view .LVU22
  96 0014 013B     		subs	r3, r3, #1
  97              		.loc 1 35 37 view .LVU23
  98 0016 07EE903A 		vmov	s15, r3	@ int
  99 001a F8EEE77A 		vcvt.f32.s32	s15, s15
 100              		.loc 1 35 34 view .LVU24
 101 001e C7EE276A 		vdiv.f32	s13, s14, s15
  36:control-base/devices/src/dm_motor.c **** }
 102              		.loc 1 36 1 view .LVU25
 103 0022 36EE800A 		vadd.f32	s0, s13, s0
 104              	.LVL6:
 105              		.loc 1 36 1 view .LVU26
 106 0026 7047     		bx	lr
 107              		.cfi_endproc
 108              	.LFE143:
 110              		.section	.text.DM_Motor_Decode,"ax",%progbits
 111              		.align	1
 112              		.global	DM_Motor_Decode
 113              		.syntax unified
 114              		.thumb
 115              		.thumb_func
 117              	DM_Motor_Decode:
 118              	.LVL7:
 119              	.LFB144:
  37:control-base/devices/src/dm_motor.c **** 
  38:control-base/devices/src/dm_motor.c **** void DM_Motor_Decode(CAN_Instance_t *motor_can_instance)
  39:control-base/devices/src/dm_motor.c **** {
 120              		.loc 1 39 1 is_stmt 1 view -0
 121              		.cfi_startproc
 122              		@ args = 0, pretend = 0, frame = 0
 123              		@ frame_needed = 0, uses_anonymous_args = 0
 124              		.loc 1 39 1 is_stmt 0 view .LVU28
 125 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
 126              	.LCFI0:
 127              		.cfi_def_cfa_offset 24
 128              		.cfi_offset 3, -24
 129              		.cfi_offset 4, -20
 130              		.cfi_offset 5, -16
 131              		.cfi_offset 6, -12
 132              		.cfi_offset 7, -8
 133              		.cfi_offset 14, -4
 134 0002 2DED028B 		vpush.64	{d8}
 135              	.LCFI1:
 136              		.cfi_def_cfa_offset 32
 137              		.cfi_offset 80, -32
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 4


 138              		.cfi_offset 81, -28
 139 0006 0446     		mov	r4, r0
  40:control-base/devices/src/dm_motor.c ****     uint8_t *data = motor_can_instance->rx_buffer;
 140              		.loc 1 40 5 is_stmt 1 view .LVU29
 141              	.LVL8:
  41:control-base/devices/src/dm_motor.c ****     DM_Motor_Stats_t *data_frame = (DM_Motor_Stats_t *)motor_can_instance->binding_motor_stats;
 142              		.loc 1 41 5 view .LVU30
 143              		.loc 1 41 23 is_stmt 0 view .LVU31
 144 0008 056A     		ldr	r5, [r0, #32]
 145              	.LVL9:
  42:control-base/devices/src/dm_motor.c **** 
  43:control-base/devices/src/dm_motor.c ****     data_frame->id = (data[0]) & 0x0F;
 146              		.loc 1 43 5 is_stmt 1 view .LVU32
 147              		.loc 1 43 27 is_stmt 0 view .LVU33
 148 000a 837C     		ldrb	r3, [r0, #18]	@ zero_extendqisi2
 149              		.loc 1 43 32 view .LVU34
 150 000c 03F00F03 		and	r3, r3, #15
 151              		.loc 1 43 20 view .LVU35
 152 0010 2B70     		strb	r3, [r5]
  44:control-base/devices/src/dm_motor.c ****     data_frame->state = (data[0]) >> 4;
 153              		.loc 1 44 5 is_stmt 1 view .LVU36
 154              		.loc 1 44 30 is_stmt 0 view .LVU37
 155 0012 837C     		ldrb	r3, [r0, #18]	@ zero_extendqisi2
 156              		.loc 1 44 23 view .LVU38
 157 0014 1B09     		lsrs	r3, r3, #4
 158 0016 6B70     		strb	r3, [r5, #1]
  45:control-base/devices/src/dm_motor.c ****     data_frame->pos_int = (data[1] << 8) | data[2];
 159              		.loc 1 45 5 is_stmt 1 view .LVU39
 160              		.loc 1 45 32 is_stmt 0 view .LVU40
 161 0018 C37C     		ldrb	r3, [r0, #19]	@ zero_extendqisi2
 162              		.loc 1 45 48 view .LVU41
 163 001a 007D     		ldrb	r0, [r0, #20]	@ zero_extendqisi2
 164              	.LVL10:
 165              		.loc 1 45 42 view .LVU42
 166 001c 40EA0320 		orr	r0, r0, r3, lsl #8
 167              		.loc 1 45 25 view .LVU43
 168 0020 6880     		strh	r0, [r5, #2]	@ movhi
  46:control-base/devices/src/dm_motor.c ****     data_frame->vel_int = (data[3] << 4) | (data[4] >> 4);
 169              		.loc 1 46 5 is_stmt 1 view .LVU44
 170              		.loc 1 46 32 is_stmt 0 view .LVU45
 171 0022 637D     		ldrb	r3, [r4, #21]	@ zero_extendqisi2
 172              		.loc 1 46 49 view .LVU46
 173 0024 A77D     		ldrb	r7, [r4, #22]	@ zero_extendqisi2
 174              		.loc 1 46 42 view .LVU47
 175 0026 3F09     		lsrs	r7, r7, #4
 176 0028 47EA0317 		orr	r7, r7, r3, lsl #4
 177              		.loc 1 46 25 view .LVU48
 178 002c AF80     		strh	r7, [r5, #4]	@ movhi
  47:control-base/devices/src/dm_motor.c ****     data_frame->torq_int = ((data[4] & 0xF) << 8) | data[5];
 179              		.loc 1 47 5 is_stmt 1 view .LVU49
 180              		.loc 1 47 34 is_stmt 0 view .LVU50
 181 002e A67D     		ldrb	r6, [r4, #22]	@ zero_extendqisi2
 182              		.loc 1 47 45 view .LVU51
 183 0030 3602     		lsls	r6, r6, #8
 184 0032 06F47066 		and	r6, r6, #3840
 185              		.loc 1 47 57 view .LVU52
 186 0036 E37D     		ldrb	r3, [r4, #23]	@ zero_extendqisi2
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 5


 187              		.loc 1 47 51 view .LVU53
 188 0038 1E43     		orrs	r6, r6, r3
 189              		.loc 1 47 26 view .LVU54
 190 003a EE80     		strh	r6, [r5, #6]	@ movhi
  48:control-base/devices/src/dm_motor.c ****     data_frame->pos_raw = uint_to_float(data_frame->pos_int, P_MIN, P_MAX, 16); // (-12.5,12.5)
 191              		.loc 1 48 5 is_stmt 1 view .LVU55
 192              		.loc 1 48 27 is_stmt 0 view .LVU56
 193 003c 1021     		movs	r1, #16
 194 003e F2EE090A 		vmov.f32	s1, #1.25e+1
 195 0042 BAEE090A 		vmov.f32	s0, #-1.25e+1
 196 0046 FFF7FEFF 		bl	uint_to_float
 197              	.LVL11:
 198 004a B0EE408A 		vmov.f32	s16, s0
 199              		.loc 1 48 25 discriminator 1 view .LVU57
 200 004e 85ED030A 		vstr.32	s0, [r5, #12]
  49:control-base/devices/src/dm_motor.c ****     data_frame->vel = uint_to_float(data_frame->vel_int, V_MIN, V_MAX, 12);     // (-45.0,45.0)
 201              		.loc 1 49 5 is_stmt 1 view .LVU58
 202              		.loc 1 49 23 is_stmt 0 view .LVU59
 203 0052 0C21     		movs	r1, #12
 204 0054 F3EE0E0A 		vmov.f32	s1, #3.0e+1
 205 0058 BBEE0E0A 		vmov.f32	s0, #-3.0e+1
 206 005c 3846     		mov	r0, r7
 207 005e FFF7FEFF 		bl	uint_to_float
 208              	.LVL12:
 209              		.loc 1 49 21 discriminator 1 view .LVU60
 210 0062 85ED050A 		vstr.32	s0, [r5, #20]
  50:control-base/devices/src/dm_motor.c ****     data_frame->torq = uint_to_float(data_frame->torq_int, T_MIN, T_MAX, 12);   // (-18.0,18.0)
 211              		.loc 1 50 5 is_stmt 1 view .LVU61
 212              		.loc 1 50 24 is_stmt 0 view .LVU62
 213 0066 0C21     		movs	r1, #12
 214 0068 F2EE040A 		vmov.f32	s1, #1.0e+1
 215 006c BAEE040A 		vmov.f32	s0, #-1.0e+1
 216 0070 3046     		mov	r0, r6
 217 0072 FFF7FEFF 		bl	uint_to_float
 218              	.LVL13:
 219              		.loc 1 50 22 discriminator 1 view .LVU63
 220 0076 85ED060A 		vstr.32	s0, [r5, #24]
  51:control-base/devices/src/dm_motor.c ****     data_frame->t_mos = (float)(data[6]);
 221              		.loc 1 51 5 is_stmt 1 view .LVU64
 222              		.loc 1 51 37 is_stmt 0 view .LVU65
 223 007a 237E     		ldrb	r3, [r4, #24]	@ zero_extendqisi2
 224              		.loc 1 51 23 view .LVU66
 225 007c AB83     		strh	r3, [r5, #28]	@ movhi
  52:control-base/devices/src/dm_motor.c ****     data_frame->t_rotor = (float)(data[7]);
 226              		.loc 1 52 5 is_stmt 1 view .LVU67
 227              		.loc 1 52 39 is_stmt 0 view .LVU68
 228 007e 637E     		ldrb	r3, [r4, #25]	@ zero_extendqisi2
 229              		.loc 1 52 25 view .LVU69
 230 0080 EB83     		strh	r3, [r5, #30]	@ movhi
  53:control-base/devices/src/dm_motor.c **** 
  54:control-base/devices/src/dm_motor.c ****     data_frame->pos = data_frame->pos_raw - data_frame->pos_offset;
 231              		.loc 1 54 5 is_stmt 1 view .LVU70
 232              		.loc 1 54 55 is_stmt 0 view .LVU71
 233 0082 D5ED047A 		vldr.32	s15, [r5, #16]
 234              		.loc 1 54 43 view .LVU72
 235 0086 38EE678A 		vsub.f32	s16, s16, s15
 236              		.loc 1 54 21 view .LVU73
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 6


 237 008a 85ED028A 		vstr.32	s16, [r5, #8]
  55:control-base/devices/src/dm_motor.c **** }
 238              		.loc 1 55 1 view .LVU74
 239 008e BDEC028B 		vldm	sp!, {d8}
 240              	.LCFI2:
 241              		.cfi_restore 80
 242              		.cfi_restore 81
 243              		.cfi_def_cfa_offset 24
 244 0092 F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 245              		.loc 1 55 1 view .LVU75
 246              		.cfi_endproc
 247              	.LFE144:
 249              		.section	.text.DM_Motor_Enable_Motor,"ax",%progbits
 250              		.align	1
 251              		.global	DM_Motor_Enable_Motor
 252              		.syntax unified
 253              		.thumb
 254              		.thumb_func
 256              	DM_Motor_Enable_Motor:
 257              	.LVL14:
 258              	.LFB145:
  56:control-base/devices/src/dm_motor.c **** 
  57:control-base/devices/src/dm_motor.c **** /**
  58:control-base/devices/src/dm_motor.c ****  * @brief This function is the user interface to enable the motor
  59:control-base/devices/src/dm_motor.c ****  * 
  60:control-base/devices/src/dm_motor.c ****  * Since damiao motors are disabled when powered on, and there is a change that
  61:control-base/devices/src/dm_motor.c ****  * a singular enable signal sent to the motor is interpreted and not received 
  62:control-base/devices/src/dm_motor.c ****  * by the motor, we implement the following logic to ensure that the motor is enabled:
  63:control-base/devices/src/dm_motor.c ****  * 
  64:control-base/devices/src/dm_motor.c ****  * 1. The user calls this function to enable the motor
  65:control-base/devices/src/dm_motor.c ****  * 2. The function sets the enable pending bit in send_pending_flag to 1
  66:control-base/devices/src/dm_motor.c ****  * 3. In motor_task, stm32 sends the motor a control signal (MIT, Position, Position + Velocity)
  67:control-base/devices/src/dm_motor.c ****  * 4. The motor sends a feedback signal to the stm32, and stm32 can read the error code
  68:control-base/devices/src/dm_motor.c ****  * 5. If the motor enable status does not match the expected status, a pending flag is 
  69:control-base/devices/src/dm_motor.c ****  *      set to send enable signal again, this logic is implmemented in motor control functions
  70:control-base/devices/src/dm_motor.c ****  *      such as @ref DM_Motor_Ctrl_MIT()
  71:control-base/devices/src/dm_motor.c ****  * 
  72:control-base/devices/src/dm_motor.c ****  * The function that sends the physical CAN signal is @ref void DM_Motor_Send()
  73:control-base/devices/src/dm_motor.c ****  */
  74:control-base/devices/src/dm_motor.c **** void DM_Motor_Enable_Motor(DM_Motor_Handle_t *motor)
  75:control-base/devices/src/dm_motor.c **** {
 259              		.loc 1 75 1 is_stmt 1 view -0
 260              		.cfi_startproc
 261              		@ args = 0, pretend = 0, frame = 0
 262              		@ frame_needed = 0, uses_anonymous_args = 0
 263              		@ link register save eliminated.
  76:control-base/devices/src/dm_motor.c ****     // set enable flag, this is the user intention to enable the motor, not neccessarily reflecting
  77:control-base/devices/src/dm_motor.c ****     motor->enabled = 1;
 264              		.loc 1 77 5 view .LVU77
 265              		.loc 1 77 20 is_stmt 0 view .LVU78
 266 0000 0123     		movs	r3, #1
 267 0002 8370     		strb	r3, [r0, #2]
  78:control-base/devices/src/dm_motor.c ****     // set the flag to send the data
  79:control-base/devices/src/dm_motor.c ****     motor->send_pending_flag &= DM_MOTOR_ENABLE_PENDING;
 268              		.loc 1 79 5 is_stmt 1 view .LVU79
 269              		.loc 1 79 10 is_stmt 0 view .LVU80
 270 0004 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 7


 271              		.loc 1 79 30 view .LVU81
 272 0006 03F00203 		and	r3, r3, #2
 273 000a C370     		strb	r3, [r0, #3]
  80:control-base/devices/src/dm_motor.c ****     // set disable flag to 0
  81:control-base/devices/src/dm_motor.c ****     motor->send_pending_flag &= ~DM_MOTOR_DISABLE_PENDING;
 274              		.loc 1 81 5 is_stmt 1 view .LVU82
  82:control-base/devices/src/dm_motor.c **** }
 275              		.loc 1 82 1 is_stmt 0 view .LVU83
 276 000c 7047     		bx	lr
 277              		.cfi_endproc
 278              	.LFE145:
 280              		.section	.text.DM_Motor_Frame_Enable_Protocol,"ax",%progbits
 281              		.align	1
 282              		.global	DM_Motor_Frame_Enable_Protocol
 283              		.syntax unified
 284              		.thumb
 285              		.thumb_func
 287              	DM_Motor_Frame_Enable_Protocol:
 288              	.LVL15:
 289              	.LFB146:
  83:control-base/devices/src/dm_motor.c **** 
  84:control-base/devices/src/dm_motor.c **** /**
  85:control-base/devices/src/dm_motor.c ****  * @brief This function is called by @ref DM_Motor_Send() to frame the CAN message before 
  86:control-base/devices/src/dm_motor.c ****  * sending the enable signal to the motor
  87:control-base/devices/src/dm_motor.c ****  */
  88:control-base/devices/src/dm_motor.c **** void DM_Motor_Frame_Enable_Protocol(DM_Motor_Handle_t *motor)
  89:control-base/devices/src/dm_motor.c **** {
 290              		.loc 1 89 1 is_stmt 1 view -0
 291              		.cfi_startproc
 292              		@ args = 0, pretend = 0, frame = 0
 293              		@ frame_needed = 0, uses_anonymous_args = 0
 294              		@ link register save eliminated.
  90:control-base/devices/src/dm_motor.c ****     CAN_Instance_t *motor_can_instance = motor->can_instance;
 295              		.loc 1 90 5 view .LVU85
 296              		.loc 1 90 21 is_stmt 0 view .LVU86
 297 0000 C368     		ldr	r3, [r0, #12]
 298              	.LVL16:
  91:control-base/devices/src/dm_motor.c ****     uint8_t *data = motor_can_instance->tx_buffer;
 299              		.loc 1 91 5 is_stmt 1 view .LVU87
  92:control-base/devices/src/dm_motor.c ****     data[0] = 0xFF;
 300              		.loc 1 92 5 view .LVU88
 301              		.loc 1 92 13 is_stmt 0 view .LVU89
 302 0002 FF22     		movs	r2, #255
 303 0004 9A72     		strb	r2, [r3, #10]
  93:control-base/devices/src/dm_motor.c ****     data[1] = 0xFF;
 304              		.loc 1 93 5 is_stmt 1 view .LVU90
 305              		.loc 1 93 13 is_stmt 0 view .LVU91
 306 0006 DA72     		strb	r2, [r3, #11]
  94:control-base/devices/src/dm_motor.c ****     data[2] = 0xFF;
 307              		.loc 1 94 5 is_stmt 1 view .LVU92
 308              		.loc 1 94 13 is_stmt 0 view .LVU93
 309 0008 1A73     		strb	r2, [r3, #12]
  95:control-base/devices/src/dm_motor.c ****     data[3] = 0xFF;
 310              		.loc 1 95 5 is_stmt 1 view .LVU94
 311              		.loc 1 95 13 is_stmt 0 view .LVU95
 312 000a 5A73     		strb	r2, [r3, #13]
  96:control-base/devices/src/dm_motor.c ****     data[4] = 0xFF;
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 8


 313              		.loc 1 96 5 is_stmt 1 view .LVU96
 314              		.loc 1 96 13 is_stmt 0 view .LVU97
 315 000c 9A73     		strb	r2, [r3, #14]
  97:control-base/devices/src/dm_motor.c ****     data[5] = 0xFF;
 316              		.loc 1 97 5 is_stmt 1 view .LVU98
 317              		.loc 1 97 13 is_stmt 0 view .LVU99
 318 000e DA73     		strb	r2, [r3, #15]
  98:control-base/devices/src/dm_motor.c ****     data[6] = 0xFF;
 319              		.loc 1 98 5 is_stmt 1 view .LVU100
 320              		.loc 1 98 13 is_stmt 0 view .LVU101
 321 0010 1A74     		strb	r2, [r3, #16]
  99:control-base/devices/src/dm_motor.c ****     data[7] = 0xFC;
 322              		.loc 1 99 5 is_stmt 1 view .LVU102
 323              		.loc 1 99 13 is_stmt 0 view .LVU103
 324 0012 FC22     		movs	r2, #252
 325 0014 5A74     		strb	r2, [r3, #17]
 100:control-base/devices/src/dm_motor.c **** }
 326              		.loc 1 100 1 view .LVU104
 327 0016 7047     		bx	lr
 328              		.cfi_endproc
 329              	.LFE146:
 331              		.section	.text.DM_Motor_Disable_Motor,"ax",%progbits
 332              		.align	1
 333              		.global	DM_Motor_Disable_Motor
 334              		.syntax unified
 335              		.thumb
 336              		.thumb_func
 338              	DM_Motor_Disable_Motor:
 339              	.LVL17:
 340              	.LFB147:
 101:control-base/devices/src/dm_motor.c **** 
 102:control-base/devices/src/dm_motor.c **** void DM_Motor_Disable_Motor(DM_Motor_Handle_t *motor)
 103:control-base/devices/src/dm_motor.c **** {
 341              		.loc 1 103 1 is_stmt 1 view -0
 342              		.cfi_startproc
 343              		@ args = 0, pretend = 0, frame = 0
 344              		@ frame_needed = 0, uses_anonymous_args = 0
 345              		@ link register save eliminated.
 104:control-base/devices/src/dm_motor.c ****     motor->enabled = 0;
 346              		.loc 1 104 5 view .LVU106
 347              		.loc 1 104 20 is_stmt 0 view .LVU107
 348 0000 0023     		movs	r3, #0
 349 0002 8370     		strb	r3, [r0, #2]
 105:control-base/devices/src/dm_motor.c ****     switch (motor->disable_behavior)
 350              		.loc 1 105 5 is_stmt 1 view .LVU108
 351              		.loc 1 105 18 is_stmt 0 view .LVU109
 352 0004 037A     		ldrb	r3, [r0, #8]	@ zero_extendqisi2
 353              		.loc 1 105 5 view .LVU110
 354 0006 13B1     		cbz	r3, .L8
 355 0008 012B     		cmp	r3, #1
 356 000a 05D0     		beq	.L9
 357 000c 7047     		bx	lr
 358              	.L8:
 106:control-base/devices/src/dm_motor.c ****     {
 107:control-base/devices/src/dm_motor.c ****     case DM_MOTOR_ZERO_CURRENT: 
 108:control-base/devices/src/dm_motor.c ****     {
 109:control-base/devices/src/dm_motor.c ****         motor->send_pending_flag |= DM_MOTOR_DISABLE_PENDING;
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 9


 359              		.loc 1 109 9 is_stmt 1 view .LVU111
 360              		.loc 1 109 14 is_stmt 0 view .LVU112
 361 000e C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 362              		.loc 1 109 34 view .LVU113
 363 0010 43F00403 		orr	r3, r3, #4
 364 0014 C370     		strb	r3, [r0, #3]
 110:control-base/devices/src/dm_motor.c ****         break;
 365              		.loc 1 110 9 is_stmt 1 view .LVU114
 366 0016 7047     		bx	lr
 367              	.L9:
 111:control-base/devices/src/dm_motor.c ****     }
 112:control-base/devices/src/dm_motor.c ****     case DM_MOTOR_HARDWARE_DISABLE:
 113:control-base/devices/src/dm_motor.c ****         motor->send_pending_flag |= DM_MOTOR_DISABLE_PENDING;
 368              		.loc 1 113 9 view .LVU115
 369              		.loc 1 113 14 is_stmt 0 view .LVU116
 370 0018 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 371              		.loc 1 113 34 view .LVU117
 372 001a 43F00403 		orr	r3, r3, #4
 373 001e C370     		strb	r3, [r0, #3]
 114:control-base/devices/src/dm_motor.c ****         break;
 374              		.loc 1 114 9 is_stmt 1 view .LVU118
 115:control-base/devices/src/dm_motor.c ****     default:
 116:control-base/devices/src/dm_motor.c ****         break;
 117:control-base/devices/src/dm_motor.c ****     }
 118:control-base/devices/src/dm_motor.c **** }
 375              		.loc 1 118 1 is_stmt 0 view .LVU119
 376 0020 7047     		bx	lr
 377              		.cfi_endproc
 378              	.LFE147:
 380              		.section	.text.DM_Motor_Frame_Disable_Protocol,"ax",%progbits
 381              		.align	1
 382              		.global	DM_Motor_Frame_Disable_Protocol
 383              		.syntax unified
 384              		.thumb
 385              		.thumb_func
 387              	DM_Motor_Frame_Disable_Protocol:
 388              	.LVL18:
 389              	.LFB148:
 119:control-base/devices/src/dm_motor.c **** 
 120:control-base/devices/src/dm_motor.c **** void DM_Motor_Frame_Disable_Protocol(DM_Motor_Handle_t *motor)
 121:control-base/devices/src/dm_motor.c **** {
 390              		.loc 1 121 1 is_stmt 1 view -0
 391              		.cfi_startproc
 392              		@ args = 0, pretend = 0, frame = 0
 393              		@ frame_needed = 0, uses_anonymous_args = 0
 394              		@ link register save eliminated.
 122:control-base/devices/src/dm_motor.c ****     uint8_t *data = motor->can_instance->tx_buffer;
 395              		.loc 1 122 5 view .LVU121
 396              		.loc 1 122 26 is_stmt 0 view .LVU122
 397 0000 C368     		ldr	r3, [r0, #12]
 398              	.LVL19:
 123:control-base/devices/src/dm_motor.c **** 
 124:control-base/devices/src/dm_motor.c ****     data[0] = 0xFF;
 399              		.loc 1 124 5 is_stmt 1 view .LVU123
 400              		.loc 1 124 13 is_stmt 0 view .LVU124
 401 0002 FF22     		movs	r2, #255
 402 0004 9A72     		strb	r2, [r3, #10]
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 10


 125:control-base/devices/src/dm_motor.c ****     data[1] = 0xFF;
 403              		.loc 1 125 5 is_stmt 1 view .LVU125
 404              		.loc 1 125 13 is_stmt 0 view .LVU126
 405 0006 DA72     		strb	r2, [r3, #11]
 126:control-base/devices/src/dm_motor.c ****     data[2] = 0xFF;
 406              		.loc 1 126 5 is_stmt 1 view .LVU127
 407              		.loc 1 126 13 is_stmt 0 view .LVU128
 408 0008 1A73     		strb	r2, [r3, #12]
 127:control-base/devices/src/dm_motor.c ****     data[3] = 0xFF;
 409              		.loc 1 127 5 is_stmt 1 view .LVU129
 410              		.loc 1 127 13 is_stmt 0 view .LVU130
 411 000a 5A73     		strb	r2, [r3, #13]
 128:control-base/devices/src/dm_motor.c ****     data[4] = 0xFF;
 412              		.loc 1 128 5 is_stmt 1 view .LVU131
 413              		.loc 1 128 13 is_stmt 0 view .LVU132
 414 000c 9A73     		strb	r2, [r3, #14]
 129:control-base/devices/src/dm_motor.c ****     data[5] = 0xFF;
 415              		.loc 1 129 5 is_stmt 1 view .LVU133
 416              		.loc 1 129 13 is_stmt 0 view .LVU134
 417 000e DA73     		strb	r2, [r3, #15]
 130:control-base/devices/src/dm_motor.c ****     data[6] = 0xFF;
 418              		.loc 1 130 5 is_stmt 1 view .LVU135
 419              		.loc 1 130 13 is_stmt 0 view .LVU136
 420 0010 1A74     		strb	r2, [r3, #16]
 131:control-base/devices/src/dm_motor.c ****     data[7] = 0xFD;
 421              		.loc 1 131 5 is_stmt 1 view .LVU137
 422              		.loc 1 131 13 is_stmt 0 view .LVU138
 423 0012 FD22     		movs	r2, #253
 424 0014 5A74     		strb	r2, [r3, #17]
 132:control-base/devices/src/dm_motor.c **** }
 425              		.loc 1 132 1 view .LVU139
 426 0016 7047     		bx	lr
 427              		.cfi_endproc
 428              	.LFE148:
 430              		.section	.text.DM_Motor_Frame_Zero_Current_Protocol,"ax",%progbits
 431              		.align	1
 432              		.global	DM_Motor_Frame_Zero_Current_Protocol
 433              		.syntax unified
 434              		.thumb
 435              		.thumb_func
 437              	DM_Motor_Frame_Zero_Current_Protocol:
 438              	.LVL20:
 439              	.LFB149:
 133:control-base/devices/src/dm_motor.c **** 
 134:control-base/devices/src/dm_motor.c **** void DM_Motor_Frame_Zero_Current_Protocol(DM_Motor_Handle_t *motor)
 135:control-base/devices/src/dm_motor.c **** {
 440              		.loc 1 135 1 is_stmt 1 view -0
 441              		.cfi_startproc
 442              		@ args = 0, pretend = 0, frame = 8
 443              		@ frame_needed = 0, uses_anonymous_args = 0
 444              		.loc 1 135 1 is_stmt 0 view .LVU141
 445 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 446              	.LCFI3:
 447              		.cfi_def_cfa_offset 36
 448              		.cfi_offset 4, -36
 449              		.cfi_offset 5, -32
 450              		.cfi_offset 6, -28
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 11


 451              		.cfi_offset 7, -24
 452              		.cfi_offset 8, -20
 453              		.cfi_offset 9, -16
 454              		.cfi_offset 10, -12
 455              		.cfi_offset 11, -8
 456              		.cfi_offset 14, -4
 457 0004 2DED028B 		vpush.64	{d8}
 458              	.LCFI4:
 459              		.cfi_def_cfa_offset 44
 460              		.cfi_offset 80, -44
 461              		.cfi_offset 81, -40
 462 0008 83B0     		sub	sp, sp, #12
 463              	.LCFI5:
 464              		.cfi_def_cfa_offset 56
 136:control-base/devices/src/dm_motor.c ****     uint8_t *data = motor->can_instance->tx_buffer;
 465              		.loc 1 136 5 is_stmt 1 view .LVU142
 466              		.loc 1 136 26 is_stmt 0 view .LVU143
 467 000a C468     		ldr	r4, [r0, #12]
 468              	.LVL21:
 137:control-base/devices/src/dm_motor.c **** 
 138:control-base/devices/src/dm_motor.c ****     uint16_t pos_temp, vel_temp, kp_temp, kd_temp, torq_temp;
 469              		.loc 1 138 5 is_stmt 1 view .LVU144
 139:control-base/devices/src/dm_motor.c **** 
 140:control-base/devices/src/dm_motor.c ****     pos_temp = float_to_uint(0, P_MIN, P_MAX, 16);
 470              		.loc 1 140 5 view .LVU145
 471              		.loc 1 140 16 is_stmt 0 view .LVU146
 472 000c 9FED2C8A 		vldr.32	s16, .L14
 473 0010 1020     		movs	r0, #16
 474              	.LVL22:
 475              		.loc 1 140 16 view .LVU147
 476 0012 B2EE091A 		vmov.f32	s2, #1.25e+1
 477 0016 FAEE090A 		vmov.f32	s1, #-1.25e+1
 478 001a B0EE480A 		vmov.f32	s0, s16
 479 001e FFF7FEFF 		bl	float_to_uint
 480              	.LVL23:
 481 0022 8046     		mov	r8, r0
 482              		.loc 1 140 14 discriminator 1 view .LVU148
 483 0024 1FFA80FB 		uxth	fp, r0
 484              	.LVL24:
 141:control-base/devices/src/dm_motor.c ****     vel_temp = float_to_uint(0, V_MIN, V_MAX, 12);
 485              		.loc 1 141 5 is_stmt 1 view .LVU149
 486              		.loc 1 141 16 is_stmt 0 view .LVU150
 487 0028 0C20     		movs	r0, #12
 488 002a B3EE0E1A 		vmov.f32	s2, #3.0e+1
 489 002e FBEE0E0A 		vmov.f32	s1, #-3.0e+1
 490 0032 B0EE480A 		vmov.f32	s0, s16
 491 0036 FFF7FEFF 		bl	float_to_uint
 492              	.LVL25:
 493 003a 0746     		mov	r7, r0
 494              		.loc 1 141 14 discriminator 1 view .LVU151
 495 003c 1FFA80FA 		uxth	r10, r0
 496              	.LVL26:
 142:control-base/devices/src/dm_motor.c ****     kp_temp = float_to_uint(0, KP_MIN, KP_MAX, 12);
 497              		.loc 1 142 5 is_stmt 1 view .LVU152
 498              		.loc 1 142 15 is_stmt 0 view .LVU153
 499 0040 0C20     		movs	r0, #12
 500 0042 9FED201A 		vldr.32	s2, .L14+4
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 12


 501 0046 F0EE480A 		vmov.f32	s1, s16
 502 004a B0EE480A 		vmov.f32	s0, s16
 503 004e FFF7FEFF 		bl	float_to_uint
 504              	.LVL27:
 505 0052 0646     		mov	r6, r0
 506              		.loc 1 142 13 discriminator 1 view .LVU154
 507 0054 85B2     		uxth	r5, r0
 508              	.LVL28:
 143:control-base/devices/src/dm_motor.c ****     kd_temp = float_to_uint(0, KD_MIN, KD_MAX, 12);
 509              		.loc 1 143 5 is_stmt 1 view .LVU155
 510              		.loc 1 143 15 is_stmt 0 view .LVU156
 511 0056 0C20     		movs	r0, #12
 512 0058 B1EE041A 		vmov.f32	s2, #5.0e+0
 513 005c F0EE480A 		vmov.f32	s1, s16
 514 0060 B0EE480A 		vmov.f32	s0, s16
 515 0064 FFF7FEFF 		bl	float_to_uint
 516              	.LVL29:
 517              		.loc 1 143 13 discriminator 1 view .LVU157
 518 0068 0190     		str	r0, [sp, #4]
 519 006a BDF80490 		ldrh	r9, [sp, #4]
 520              	.LVL30:
 144:control-base/devices/src/dm_motor.c ****     torq_temp = float_to_uint(0, T_MIN, T_MAX, 12);
 521              		.loc 1 144 5 is_stmt 1 view .LVU158
 522              		.loc 1 144 17 is_stmt 0 view .LVU159
 523 006e 0C20     		movs	r0, #12
 524 0070 B2EE041A 		vmov.f32	s2, #1.0e+1
 525 0074 FAEE040A 		vmov.f32	s1, #-1.0e+1
 526 0078 B0EE480A 		vmov.f32	s0, s16
 527 007c FFF7FEFF 		bl	float_to_uint
 528              	.LVL31:
 145:control-base/devices/src/dm_motor.c **** 
 146:control-base/devices/src/dm_motor.c ****     data[0] = (pos_temp >> 8);
 529              		.loc 1 146 5 is_stmt 1 view .LVU160
 530              		.loc 1 146 13 is_stmt 0 view .LVU161
 531 0080 4FEA1B2B 		lsr	fp, fp, #8
 532              	.LVL32:
 533              		.loc 1 146 13 view .LVU162
 534 0084 84F80AB0 		strb	fp, [r4, #10]
 147:control-base/devices/src/dm_motor.c ****     data[1] = pos_temp;
 535              		.loc 1 147 5 is_stmt 1 view .LVU163
 536              		.loc 1 147 13 is_stmt 0 view .LVU164
 537 0088 84F80B80 		strb	r8, [r4, #11]
 148:control-base/devices/src/dm_motor.c ****     data[2] = (vel_temp >> 4);
 538              		.loc 1 148 5 is_stmt 1 view .LVU165
 539              		.loc 1 148 13 is_stmt 0 view .LVU166
 540 008c 4FEA1A1A 		lsr	r10, r10, #4
 541              	.LVL33:
 542              		.loc 1 148 13 view .LVU167
 543 0090 84F80CA0 		strb	r10, [r4, #12]
 149:control-base/devices/src/dm_motor.c ****     data[3] = ((vel_temp & 0xF) << 4) | (kp_temp >> 8);
 544              		.loc 1 149 5 is_stmt 1 view .LVU168
 545              		.loc 1 149 39 is_stmt 0 view .LVU169
 546 0094 2D0A     		lsrs	r5, r5, #8
 547              	.LVL34:
 548              		.loc 1 149 39 view .LVU170
 549 0096 45EA0715 		orr	r5, r5, r7, lsl #4
 550              		.loc 1 149 13 view .LVU171
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 13


 551 009a 6573     		strb	r5, [r4, #13]
 150:control-base/devices/src/dm_motor.c ****     data[4] = kp_temp;
 552              		.loc 1 150 5 is_stmt 1 view .LVU172
 553              		.loc 1 150 13 is_stmt 0 view .LVU173
 554 009c A673     		strb	r6, [r4, #14]
 151:control-base/devices/src/dm_motor.c ****     data[5] = (kd_temp >> 4);
 555              		.loc 1 151 5 is_stmt 1 view .LVU174
 556              		.loc 1 151 13 is_stmt 0 view .LVU175
 557 009e 4FEA1919 		lsr	r9, r9, #4
 558              	.LVL35:
 559              		.loc 1 151 13 view .LVU176
 560 00a2 84F80F90 		strb	r9, [r4, #15]
 152:control-base/devices/src/dm_motor.c ****     data[6] = ((kd_temp & 0xF) << 4) | (torq_temp >> 8);
 561              		.loc 1 152 5 is_stmt 1 view .LVU177
 562              		.loc 1 152 38 is_stmt 0 view .LVU178
 563 00a6 C0F30723 		ubfx	r3, r0, #8, #8
 564 00aa 019A     		ldr	r2, [sp, #4]
 565 00ac 43EA0213 		orr	r3, r3, r2, lsl #4
 566              		.loc 1 152 13 view .LVU179
 567 00b0 2374     		strb	r3, [r4, #16]
 153:control-base/devices/src/dm_motor.c ****     data[7] = torq_temp;
 568              		.loc 1 153 5 is_stmt 1 view .LVU180
 569              		.loc 1 153 13 is_stmt 0 view .LVU181
 570 00b2 6074     		strb	r0, [r4, #17]
 154:control-base/devices/src/dm_motor.c **** }
 571              		.loc 1 154 1 view .LVU182
 572 00b4 03B0     		add	sp, sp, #12
 573              	.LCFI6:
 574              		.cfi_def_cfa_offset 44
 575              		@ sp needed
 576 00b6 BDEC028B 		vldm	sp!, {d8}
 577              	.LCFI7:
 578              		.cfi_restore 80
 579              		.cfi_restore 81
 580              		.cfi_def_cfa_offset 36
 581 00ba BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 582              	.LVL36:
 583              	.L15:
 584              		.loc 1 154 1 view .LVU183
 585 00be 00BF     		.align	2
 586              	.L14:
 587 00c0 00000000 		.word	0
 588 00c4 0000FA43 		.word	1140457472
 589              		.cfi_endproc
 590              	.LFE149:
 592              		.section	.text.DM_Motor_Disable_All,"ax",%progbits
 593              		.align	1
 594              		.global	DM_Motor_Disable_All
 595              		.syntax unified
 596              		.thumb
 597              		.thumb_func
 599              	DM_Motor_Disable_All:
 600              	.LFB150:
 155:control-base/devices/src/dm_motor.c **** 
 156:control-base/devices/src/dm_motor.c **** void DM_Motor_Disable_All()
 157:control-base/devices/src/dm_motor.c **** {
 601              		.loc 1 157 1 is_stmt 1 view -0
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 14


 602              		.cfi_startproc
 603              		@ args = 0, pretend = 0, frame = 0
 604              		@ frame_needed = 0, uses_anonymous_args = 0
 605 0000 10B5     		push	{r4, lr}
 606              	.LCFI8:
 607              		.cfi_def_cfa_offset 8
 608              		.cfi_offset 4, -8
 609              		.cfi_offset 14, -4
 158:control-base/devices/src/dm_motor.c ****     for (int i = 0; i < g_dm_motor_num; i++)
 610              		.loc 1 158 5 view .LVU185
 611              	.LBB2:
 612              		.loc 1 158 10 view .LVU186
 613              	.LVL37:
 614              		.loc 1 158 14 is_stmt 0 view .LVU187
 615 0002 0024     		movs	r4, #0
 616              		.loc 1 158 5 view .LVU188
 617 0004 00E0     		b	.L17
 618              	.LVL38:
 619              	.L18:
 620              		.loc 1 158 42 is_stmt 1 discriminator 2 view .LVU189
 621 0006 0134     		adds	r4, r4, #1
 622              	.LVL39:
 623              	.L17:
 624              		.loc 1 158 23 discriminator 1 view .LVU190
 625 0008 064B     		ldr	r3, .L22
 626 000a 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 627 000c A342     		cmp	r3, r4
 628 000e 07DD     		ble	.L21
 159:control-base/devices/src/dm_motor.c ****     {
 160:control-base/devices/src/dm_motor.c ****         if (g_dm_motors[i] == NULL)
 629              		.loc 1 160 9 view .LVU191
 630              		.loc 1 160 24 is_stmt 0 view .LVU192
 631 0010 054B     		ldr	r3, .L22+4
 632 0012 53F82400 		ldr	r0, [r3, r4, lsl #2]
 633              		.loc 1 160 12 view .LVU193
 634 0016 0028     		cmp	r0, #0
 635 0018 F5D0     		beq	.L18
 161:control-base/devices/src/dm_motor.c ****         {
 162:control-base/devices/src/dm_motor.c ****             continue;
 163:control-base/devices/src/dm_motor.c ****         }
 164:control-base/devices/src/dm_motor.c ****         DM_Motor_Disable_Motor(g_dm_motors[i]);
 636              		.loc 1 164 9 is_stmt 1 view .LVU194
 637 001a FFF7FEFF 		bl	DM_Motor_Disable_Motor
 638              	.LVL40:
 639 001e F2E7     		b	.L18
 640              	.L21:
 641              	.LBE2:
 165:control-base/devices/src/dm_motor.c ****     }
 166:control-base/devices/src/dm_motor.c **** }
 642              		.loc 1 166 1 is_stmt 0 view .LVU195
 643 0020 10BD     		pop	{r4, pc}
 644              	.LVL41:
 645              	.L23:
 646              		.loc 1 166 1 view .LVU196
 647 0022 00BF     		.align	2
 648              	.L22:
 649 0024 00000000 		.word	g_dm_motor_num
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 15


 650 0028 00000000 		.word	g_dm_motors
 651              		.cfi_endproc
 652              	.LFE150:
 654              		.section	.text.DM_Motor_Ctrl_MIT,"ax",%progbits
 655              		.align	1
 656              		.global	DM_Motor_Ctrl_MIT
 657              		.syntax unified
 658              		.thumb
 659              		.thumb_func
 661              	DM_Motor_Ctrl_MIT:
 662              	.LVL42:
 663              	.LFB151:
 167:control-base/devices/src/dm_motor.c **** 
 168:control-base/devices/src/dm_motor.c **** void DM_Motor_Ctrl_MIT(DM_Motor_Handle_t *motor, float target_pos, float target_vel, float torq)
 169:control-base/devices/src/dm_motor.c **** {
 664              		.loc 1 169 1 is_stmt 1 view -0
 665              		.cfi_startproc
 666              		@ args = 0, pretend = 0, frame = 8
 667              		@ frame_needed = 0, uses_anonymous_args = 0
 668              		.loc 1 169 1 is_stmt 0 view .LVU198
 669 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 670              	.LCFI9:
 671              		.cfi_def_cfa_offset 36
 672              		.cfi_offset 4, -36
 673              		.cfi_offset 5, -32
 674              		.cfi_offset 6, -28
 675              		.cfi_offset 7, -24
 676              		.cfi_offset 8, -20
 677              		.cfi_offset 9, -16
 678              		.cfi_offset 10, -12
 679              		.cfi_offset 11, -8
 680              		.cfi_offset 14, -4
 681 0004 2DED028B 		vpush.64	{d8}
 682              	.LCFI10:
 683              		.cfi_def_cfa_offset 44
 684              		.cfi_offset 80, -44
 685              		.cfi_offset 81, -40
 686 0008 83B0     		sub	sp, sp, #12
 687              	.LCFI11:
 688              		.cfi_def_cfa_offset 56
 689 000a 0446     		mov	r4, r0
 690 000c F0EE608A 		vmov.f32	s17, s1
 691 0010 B0EE418A 		vmov.f32	s16, s2
 170:control-base/devices/src/dm_motor.c ****     uint16_t pos_temp, vel_temp, kp_temp, kd_temp, torq_temp;
 692              		.loc 1 170 5 is_stmt 1 view .LVU199
 171:control-base/devices/src/dm_motor.c ****     CAN_Instance_t *motor_can_instance = motor->can_instance;
 693              		.loc 1 171 5 view .LVU200
 694              		.loc 1 171 21 is_stmt 0 view .LVU201
 695 0014 C568     		ldr	r5, [r0, #12]
 696              	.LVL43:
 172:control-base/devices/src/dm_motor.c ****     uint8_t *data = motor_can_instance->tx_buffer;
 697              		.loc 1 172 5 is_stmt 1 view .LVU202
 173:control-base/devices/src/dm_motor.c ****     motor->target_pos = target_pos + motor->stats->pos_offset;
 698              		.loc 1 173 5 view .LVU203
 699              		.loc 1 173 43 is_stmt 0 view .LVU204
 700 0016 436A     		ldr	r3, [r0, #36]
 701              		.loc 1 173 50 view .LVU205
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 16


 702 0018 D3ED047A 		vldr.32	s15, [r3, #16]
 703              		.loc 1 173 36 view .LVU206
 704 001c 37EE800A 		vadd.f32	s0, s15, s0
 705              	.LVL44:
 706              		.loc 1 173 23 view .LVU207
 707 0020 80ED040A 		vstr.32	s0, [r0, #16]
 174:control-base/devices/src/dm_motor.c ****     motor->target_vel = target_vel;
 708              		.loc 1 174 5 is_stmt 1 view .LVU208
 709              		.loc 1 174 23 is_stmt 0 view .LVU209
 710 0024 C0ED050A 		vstr.32	s1, [r0, #20]
 175:control-base/devices/src/dm_motor.c ****     motor->torq = torq;
 711              		.loc 1 175 5 is_stmt 1 view .LVU210
 712              		.loc 1 175 17 is_stmt 0 view .LVU211
 713 0028 80ED081A 		vstr.32	s2, [r0, #32]
 176:control-base/devices/src/dm_motor.c ****     pos_temp = float_to_uint(motor->target_pos, P_MIN, P_MAX, 16);
 714              		.loc 1 176 5 is_stmt 1 view .LVU212
 715              		.loc 1 176 16 is_stmt 0 view .LVU213
 716 002c 1020     		movs	r0, #16
 717              	.LVL45:
 718              		.loc 1 176 16 view .LVU214
 719 002e B2EE091A 		vmov.f32	s2, #1.25e+1
 720              	.LVL46:
 721              		.loc 1 176 16 view .LVU215
 722 0032 FAEE090A 		vmov.f32	s1, #-1.25e+1
 723              	.LVL47:
 724              		.loc 1 176 16 view .LVU216
 725 0036 FFF7FEFF 		bl	float_to_uint
 726              	.LVL48:
 727 003a 8046     		mov	r8, r0
 728              		.loc 1 176 14 discriminator 1 view .LVU217
 729 003c 1FFA80FB 		uxth	fp, r0
 730              	.LVL49:
 177:control-base/devices/src/dm_motor.c ****     vel_temp = float_to_uint(motor->target_vel, V_MIN, V_MAX, 12);
 731              		.loc 1 177 5 is_stmt 1 view .LVU218
 732              		.loc 1 177 16 is_stmt 0 view .LVU219
 733 0040 0C20     		movs	r0, #12
 734 0042 B3EE0E1A 		vmov.f32	s2, #3.0e+1
 735 0046 FBEE0E0A 		vmov.f32	s1, #-3.0e+1
 736 004a B0EE680A 		vmov.f32	s0, s17
 737 004e FFF7FEFF 		bl	float_to_uint
 738              	.LVL50:
 739 0052 0746     		mov	r7, r0
 740              		.loc 1 177 14 discriminator 1 view .LVU220
 741 0054 1FFA80FA 		uxth	r10, r0
 742              	.LVL51:
 178:control-base/devices/src/dm_motor.c ****     kp_temp = float_to_uint(motor->kp, KP_MIN, KP_MAX, 12);
 743              		.loc 1 178 5 is_stmt 1 view .LVU221
 744              		.loc 1 178 15 is_stmt 0 view .LVU222
 745 0058 DFED288A 		vldr.32	s17, .L28
 746              	.LVL52:
 747              		.loc 1 178 15 view .LVU223
 748 005c 0C20     		movs	r0, #12
 749 005e 9FED281A 		vldr.32	s2, .L28+4
 750 0062 F0EE680A 		vmov.f32	s1, s17
 751 0066 94ED060A 		vldr.32	s0, [r4, #24]
 752 006a FFF7FEFF 		bl	float_to_uint
 753              	.LVL53:
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 17


 754              		.loc 1 178 13 discriminator 1 view .LVU224
 755 006e 0090     		str	r0, [sp]
 756 0070 BDF80060 		ldrh	r6, [sp]
 757              	.LVL54:
 179:control-base/devices/src/dm_motor.c ****     kd_temp = float_to_uint(motor->kd, KD_MIN, KD_MAX, 12);
 758              		.loc 1 179 5 is_stmt 1 view .LVU225
 759              		.loc 1 179 15 is_stmt 0 view .LVU226
 760 0074 0C20     		movs	r0, #12
 761 0076 B1EE041A 		vmov.f32	s2, #5.0e+0
 762 007a F0EE680A 		vmov.f32	s1, s17
 763 007e 94ED070A 		vldr.32	s0, [r4, #28]
 764 0082 FFF7FEFF 		bl	float_to_uint
 765              	.LVL55:
 766              		.loc 1 179 13 discriminator 1 view .LVU227
 767 0086 0190     		str	r0, [sp, #4]
 768 0088 BDF80490 		ldrh	r9, [sp, #4]
 769              	.LVL56:
 180:control-base/devices/src/dm_motor.c ****     torq_temp = float_to_uint(motor->torq, T_MIN, T_MAX, 12);
 770              		.loc 1 180 5 is_stmt 1 view .LVU228
 771              		.loc 1 180 17 is_stmt 0 view .LVU229
 772 008c 0C20     		movs	r0, #12
 773 008e B2EE041A 		vmov.f32	s2, #1.0e+1
 774 0092 FAEE040A 		vmov.f32	s1, #-1.0e+1
 775 0096 B0EE480A 		vmov.f32	s0, s16
 776 009a FFF7FEFF 		bl	float_to_uint
 777              	.LVL57:
 181:control-base/devices/src/dm_motor.c **** 
 182:control-base/devices/src/dm_motor.c ****     data[0] = (pos_temp >> 8);
 778              		.loc 1 182 5 is_stmt 1 view .LVU230
 779              		.loc 1 182 13 is_stmt 0 view .LVU231
 780 009e 4FEA1B2B 		lsr	fp, fp, #8
 781              	.LVL58:
 782              		.loc 1 182 13 view .LVU232
 783 00a2 85F80AB0 		strb	fp, [r5, #10]
 183:control-base/devices/src/dm_motor.c ****     data[1] = pos_temp;
 784              		.loc 1 183 5 is_stmt 1 view .LVU233
 785              		.loc 1 183 13 is_stmt 0 view .LVU234
 786 00a6 85F80B80 		strb	r8, [r5, #11]
 184:control-base/devices/src/dm_motor.c ****     data[2] = (vel_temp >> 4);
 787              		.loc 1 184 5 is_stmt 1 view .LVU235
 788              		.loc 1 184 13 is_stmt 0 view .LVU236
 789 00aa 4FEA1A1A 		lsr	r10, r10, #4
 790              	.LVL59:
 791              		.loc 1 184 13 view .LVU237
 792 00ae 85F80CA0 		strb	r10, [r5, #12]
 185:control-base/devices/src/dm_motor.c ****     data[3] = ((vel_temp & 0xF) << 4) | (kp_temp >> 8);
 793              		.loc 1 185 5 is_stmt 1 view .LVU238
 794              		.loc 1 185 39 is_stmt 0 view .LVU239
 795 00b2 360A     		lsrs	r6, r6, #8
 796              	.LVL60:
 797              		.loc 1 185 39 view .LVU240
 798 00b4 46EA0716 		orr	r6, r6, r7, lsl #4
 799              		.loc 1 185 13 view .LVU241
 800 00b8 6E73     		strb	r6, [r5, #13]
 186:control-base/devices/src/dm_motor.c ****     data[4] = kp_temp;
 801              		.loc 1 186 5 is_stmt 1 view .LVU242
 802              		.loc 1 186 13 is_stmt 0 view .LVU243
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 18


 803 00ba 009B     		ldr	r3, [sp]
 804 00bc AB73     		strb	r3, [r5, #14]
 187:control-base/devices/src/dm_motor.c ****     data[5] = (kd_temp >> 4);
 805              		.loc 1 187 5 is_stmt 1 view .LVU244
 806              		.loc 1 187 13 is_stmt 0 view .LVU245
 807 00be 4FEA1919 		lsr	r9, r9, #4
 808              	.LVL61:
 809              		.loc 1 187 13 view .LVU246
 810 00c2 85F80F90 		strb	r9, [r5, #15]
 188:control-base/devices/src/dm_motor.c ****     data[6] = ((kd_temp & 0xF) << 4) | (torq_temp >> 8);
 811              		.loc 1 188 5 is_stmt 1 view .LVU247
 812              		.loc 1 188 38 is_stmt 0 view .LVU248
 813 00c6 C0F30723 		ubfx	r3, r0, #8, #8
 814 00ca 019A     		ldr	r2, [sp, #4]
 815 00cc 43EA0213 		orr	r3, r3, r2, lsl #4
 816              		.loc 1 188 13 view .LVU249
 817 00d0 2B74     		strb	r3, [r5, #16]
 189:control-base/devices/src/dm_motor.c ****     data[7] = torq_temp;
 818              		.loc 1 189 5 is_stmt 1 view .LVU250
 819              		.loc 1 189 13 is_stmt 0 view .LVU251
 820 00d2 6874     		strb	r0, [r5, #17]
 190:control-base/devices/src/dm_motor.c **** 
 191:control-base/devices/src/dm_motor.c ****     // set the flag to send the data
 192:control-base/devices/src/dm_motor.c ****     motor->send_pending_flag |= DM_MOTOR_SEND_PENDING;
 821              		.loc 1 192 5 is_stmt 1 view .LVU252
 822              		.loc 1 192 10 is_stmt 0 view .LVU253
 823 00d4 E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 824              		.loc 1 192 30 view .LVU254
 825 00d6 43F00102 		orr	r2, r3, #1
 826 00da E270     		strb	r2, [r4, #3]
 193:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 827              		.loc 1 193 5 is_stmt 1 view .LVU255
 828              		.loc 1 193 14 is_stmt 0 view .LVU256
 829 00dc A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 830              		.loc 1 193 8 view .LVU257
 831 00de 012A     		cmp	r2, #1
 832 00e0 04D0     		beq	.L27
 833              	.L24:
 194:control-base/devices/src/dm_motor.c ****     {
 195:control-base/devices/src/dm_motor.c ****         motor->send_pending_flag |= DM_MOTOR_ENABLE_PENDING; // set the enable pending flag
 196:control-base/devices/src/dm_motor.c ****     }
 197:control-base/devices/src/dm_motor.c **** }
 834              		.loc 1 197 1 view .LVU258
 835 00e2 03B0     		add	sp, sp, #12
 836              	.LCFI12:
 837              		.cfi_remember_state
 838              		.cfi_def_cfa_offset 44
 839              	.LVL62:
 840              		.loc 1 197 1 view .LVU259
 841              		@ sp needed
 842 00e4 BDEC028B 		vldm	sp!, {d8}
 843              	.LCFI13:
 844              		.cfi_restore 80
 845              		.cfi_restore 81
 846              		.cfi_def_cfa_offset 36
 847              	.LVL63:
 848              		.loc 1 197 1 view .LVU260
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 19


 849 00e8 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 850              	.LVL64:
 851              	.L27:
 852              	.LCFI14:
 853              		.cfi_restore_state
 193:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 854              		.loc 1 193 37 discriminator 1 view .LVU261
 855 00ec 626A     		ldr	r2, [r4, #36]
 193:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 856              		.loc 1 193 44 discriminator 1 view .LVU262
 857 00ee 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 193:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 858              		.loc 1 193 29 discriminator 1 view .LVU263
 859 00f0 012A     		cmp	r2, #1
 860 00f2 F6D0     		beq	.L24
 195:control-base/devices/src/dm_motor.c ****     }
 861              		.loc 1 195 9 is_stmt 1 view .LVU264
 195:control-base/devices/src/dm_motor.c ****     }
 862              		.loc 1 195 34 is_stmt 0 view .LVU265
 863 00f4 43F00303 		orr	r3, r3, #3
 864 00f8 E370     		strb	r3, [r4, #3]
 865              		.loc 1 197 1 view .LVU266
 866 00fa F2E7     		b	.L24
 867              	.L29:
 868              		.align	2
 869              	.L28:
 870 00fc 00000000 		.word	0
 871 0100 0000FA43 		.word	1140457472
 872              		.cfi_endproc
 873              	.LFE151:
 875              		.section	.text.DM_Motor_Ctrl_MIT_PD,"ax",%progbits
 876              		.align	1
 877              		.global	DM_Motor_Ctrl_MIT_PD
 878              		.syntax unified
 879              		.thumb
 880              		.thumb_func
 882              	DM_Motor_Ctrl_MIT_PD:
 883              	.LVL65:
 884              	.LFB152:
 198:control-base/devices/src/dm_motor.c **** 
 199:control-base/devices/src/dm_motor.c **** void DM_Motor_Ctrl_MIT_PD(DM_Motor_Handle_t *motor, float target_pos, float target_vel, float torq,
 200:control-base/devices/src/dm_motor.c **** {
 885              		.loc 1 200 1 is_stmt 1 view -0
 886              		.cfi_startproc
 887              		@ args = 0, pretend = 0, frame = 8
 888              		@ frame_needed = 0, uses_anonymous_args = 0
 889              		.loc 1 200 1 is_stmt 0 view .LVU268
 890 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 891              	.LCFI15:
 892              		.cfi_def_cfa_offset 36
 893              		.cfi_offset 4, -36
 894              		.cfi_offset 5, -32
 895              		.cfi_offset 6, -28
 896              		.cfi_offset 7, -24
 897              		.cfi_offset 8, -20
 898              		.cfi_offset 9, -16
 899              		.cfi_offset 10, -12
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 20


 900              		.cfi_offset 11, -8
 901              		.cfi_offset 14, -4
 902 0004 2DED048B 		vpush.64	{d8, d9}
 903              	.LCFI16:
 904              		.cfi_def_cfa_offset 52
 905              		.cfi_offset 80, -52
 906              		.cfi_offset 81, -48
 907              		.cfi_offset 82, -44
 908              		.cfi_offset 83, -40
 909 0008 83B0     		sub	sp, sp, #12
 910              	.LCFI17:
 911              		.cfi_def_cfa_offset 64
 912 000a 0446     		mov	r4, r0
 913 000c F0EE608A 		vmov.f32	s17, s1
 914 0010 B0EE418A 		vmov.f32	s16, s2
 915 0014 F0EE619A 		vmov.f32	s19, s3
 916 0018 B0EE429A 		vmov.f32	s18, s4
 201:control-base/devices/src/dm_motor.c ****     uint16_t pos_temp, vel_temp, kp_temp, kd_temp, torq_temp;
 917              		.loc 1 201 5 is_stmt 1 view .LVU269
 202:control-base/devices/src/dm_motor.c ****     CAN_Instance_t *motor_can_instance = motor->can_instance;
 918              		.loc 1 202 5 view .LVU270
 919              		.loc 1 202 21 is_stmt 0 view .LVU271
 920 001c C568     		ldr	r5, [r0, #12]
 921              	.LVL66:
 203:control-base/devices/src/dm_motor.c ****     uint8_t *data = motor_can_instance->tx_buffer;
 922              		.loc 1 203 5 is_stmt 1 view .LVU272
 204:control-base/devices/src/dm_motor.c ****     motor->target_pos = target_pos + motor->stats->pos_offset;
 923              		.loc 1 204 5 view .LVU273
 924              		.loc 1 204 43 is_stmt 0 view .LVU274
 925 001e 436A     		ldr	r3, [r0, #36]
 926              		.loc 1 204 50 view .LVU275
 927 0020 D3ED047A 		vldr.32	s15, [r3, #16]
 928              		.loc 1 204 36 view .LVU276
 929 0024 37EE800A 		vadd.f32	s0, s15, s0
 930              	.LVL67:
 931              		.loc 1 204 23 view .LVU277
 932 0028 80ED040A 		vstr.32	s0, [r0, #16]
 205:control-base/devices/src/dm_motor.c ****     motor->target_vel = target_vel;
 933              		.loc 1 205 5 is_stmt 1 view .LVU278
 934              		.loc 1 205 23 is_stmt 0 view .LVU279
 935 002c C0ED050A 		vstr.32	s1, [r0, #20]
 206:control-base/devices/src/dm_motor.c ****     motor->torq = torq;
 936              		.loc 1 206 5 is_stmt 1 view .LVU280
 937              		.loc 1 206 17 is_stmt 0 view .LVU281
 938 0030 80ED081A 		vstr.32	s2, [r0, #32]
 207:control-base/devices/src/dm_motor.c ****     pos_temp = float_to_uint(motor->target_pos, P_MIN, P_MAX, 16);
 939              		.loc 1 207 5 is_stmt 1 view .LVU282
 940              		.loc 1 207 16 is_stmt 0 view .LVU283
 941 0034 1020     		movs	r0, #16
 942              	.LVL68:
 943              		.loc 1 207 16 view .LVU284
 944 0036 B2EE091A 		vmov.f32	s2, #1.25e+1
 945              	.LVL69:
 946              		.loc 1 207 16 view .LVU285
 947 003a FAEE090A 		vmov.f32	s1, #-1.25e+1
 948              	.LVL70:
 949              		.loc 1 207 16 view .LVU286
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 21


 950 003e FFF7FEFF 		bl	float_to_uint
 951              	.LVL71:
 952              		.loc 1 207 16 view .LVU287
 953 0042 8046     		mov	r8, r0
 954              		.loc 1 207 14 discriminator 1 view .LVU288
 955 0044 1FFA80FB 		uxth	fp, r0
 956              	.LVL72:
 208:control-base/devices/src/dm_motor.c ****     vel_temp = float_to_uint(motor->target_vel, V_MIN, V_MAX, 12);
 957              		.loc 1 208 5 is_stmt 1 view .LVU289
 958              		.loc 1 208 16 is_stmt 0 view .LVU290
 959 0048 0C20     		movs	r0, #12
 960 004a B3EE0E1A 		vmov.f32	s2, #3.0e+1
 961 004e FBEE0E0A 		vmov.f32	s1, #-3.0e+1
 962 0052 B0EE680A 		vmov.f32	s0, s17
 963 0056 FFF7FEFF 		bl	float_to_uint
 964              	.LVL73:
 965 005a 0746     		mov	r7, r0
 966              		.loc 1 208 14 discriminator 1 view .LVU291
 967 005c 1FFA80FA 		uxth	r10, r0
 968              	.LVL74:
 209:control-base/devices/src/dm_motor.c ****     kp_temp = float_to_uint(kp, KP_MIN, KP_MAX, 12);
 969              		.loc 1 209 5 is_stmt 1 view .LVU292
 970              		.loc 1 209 15 is_stmt 0 view .LVU293
 971 0060 DFED288A 		vldr.32	s17, .L34
 972              	.LVL75:
 973              		.loc 1 209 15 view .LVU294
 974 0064 0C20     		movs	r0, #12
 975 0066 9FED281A 		vldr.32	s2, .L34+4
 976 006a F0EE680A 		vmov.f32	s1, s17
 977 006e B0EE690A 		vmov.f32	s0, s19
 978 0072 FFF7FEFF 		bl	float_to_uint
 979              	.LVL76:
 980              		.loc 1 209 13 discriminator 1 view .LVU295
 981 0076 0090     		str	r0, [sp]
 982 0078 BDF80060 		ldrh	r6, [sp]
 983              	.LVL77:
 210:control-base/devices/src/dm_motor.c ****     kd_temp = float_to_uint(kd, KD_MIN, KD_MAX, 12);
 984              		.loc 1 210 5 is_stmt 1 view .LVU296
 985              		.loc 1 210 15 is_stmt 0 view .LVU297
 986 007c 0C20     		movs	r0, #12
 987 007e B1EE041A 		vmov.f32	s2, #5.0e+0
 988 0082 F0EE680A 		vmov.f32	s1, s17
 989 0086 B0EE490A 		vmov.f32	s0, s18
 990 008a FFF7FEFF 		bl	float_to_uint
 991              	.LVL78:
 992              		.loc 1 210 13 discriminator 1 view .LVU298
 993 008e 0190     		str	r0, [sp, #4]
 994 0090 BDF80490 		ldrh	r9, [sp, #4]
 995              	.LVL79:
 211:control-base/devices/src/dm_motor.c ****     torq_temp = float_to_uint(motor->torq, T_MIN, T_MAX, 12);
 996              		.loc 1 211 5 is_stmt 1 view .LVU299
 997              		.loc 1 211 17 is_stmt 0 view .LVU300
 998 0094 0C20     		movs	r0, #12
 999 0096 B2EE041A 		vmov.f32	s2, #1.0e+1
 1000 009a FAEE040A 		vmov.f32	s1, #-1.0e+1
 1001 009e B0EE480A 		vmov.f32	s0, s16
 1002 00a2 FFF7FEFF 		bl	float_to_uint
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 22


 1003              	.LVL80:
 212:control-base/devices/src/dm_motor.c **** 
 213:control-base/devices/src/dm_motor.c ****     data[0] = (pos_temp >> 8);
 1004              		.loc 1 213 5 is_stmt 1 view .LVU301
 1005              		.loc 1 213 13 is_stmt 0 view .LVU302
 1006 00a6 4FEA1B2B 		lsr	fp, fp, #8
 1007              	.LVL81:
 1008              		.loc 1 213 13 view .LVU303
 1009 00aa 85F80AB0 		strb	fp, [r5, #10]
 214:control-base/devices/src/dm_motor.c ****     data[1] = pos_temp;
 1010              		.loc 1 214 5 is_stmt 1 view .LVU304
 1011              		.loc 1 214 13 is_stmt 0 view .LVU305
 1012 00ae 85F80B80 		strb	r8, [r5, #11]
 215:control-base/devices/src/dm_motor.c ****     data[2] = (vel_temp >> 4);
 1013              		.loc 1 215 5 is_stmt 1 view .LVU306
 1014              		.loc 1 215 13 is_stmt 0 view .LVU307
 1015 00b2 4FEA1A1A 		lsr	r10, r10, #4
 1016              	.LVL82:
 1017              		.loc 1 215 13 view .LVU308
 1018 00b6 85F80CA0 		strb	r10, [r5, #12]
 216:control-base/devices/src/dm_motor.c ****     data[3] = ((vel_temp & 0xF) << 4) | (kp_temp >> 8);
 1019              		.loc 1 216 5 is_stmt 1 view .LVU309
 1020              		.loc 1 216 39 is_stmt 0 view .LVU310
 1021 00ba 360A     		lsrs	r6, r6, #8
 1022              	.LVL83:
 1023              		.loc 1 216 39 view .LVU311
 1024 00bc 46EA0716 		orr	r6, r6, r7, lsl #4
 1025              		.loc 1 216 13 view .LVU312
 1026 00c0 6E73     		strb	r6, [r5, #13]
 217:control-base/devices/src/dm_motor.c ****     data[4] = kp_temp;
 1027              		.loc 1 217 5 is_stmt 1 view .LVU313
 1028              		.loc 1 217 13 is_stmt 0 view .LVU314
 1029 00c2 009B     		ldr	r3, [sp]
 1030 00c4 AB73     		strb	r3, [r5, #14]
 218:control-base/devices/src/dm_motor.c ****     data[5] = (kd_temp >> 4);
 1031              		.loc 1 218 5 is_stmt 1 view .LVU315
 1032              		.loc 1 218 13 is_stmt 0 view .LVU316
 1033 00c6 4FEA1919 		lsr	r9, r9, #4
 1034              	.LVL84:
 1035              		.loc 1 218 13 view .LVU317
 1036 00ca 85F80F90 		strb	r9, [r5, #15]
 219:control-base/devices/src/dm_motor.c ****     data[6] = ((kd_temp & 0xF) << 4) | (torq_temp >> 8);
 1037              		.loc 1 219 5 is_stmt 1 view .LVU318
 1038              		.loc 1 219 38 is_stmt 0 view .LVU319
 1039 00ce C0F30723 		ubfx	r3, r0, #8, #8
 1040 00d2 019A     		ldr	r2, [sp, #4]
 1041 00d4 43EA0213 		orr	r3, r3, r2, lsl #4
 1042              		.loc 1 219 13 view .LVU320
 1043 00d8 2B74     		strb	r3, [r5, #16]
 220:control-base/devices/src/dm_motor.c ****     data[7] = torq_temp;
 1044              		.loc 1 220 5 is_stmt 1 view .LVU321
 1045              		.loc 1 220 13 is_stmt 0 view .LVU322
 1046 00da 6874     		strb	r0, [r5, #17]
 221:control-base/devices/src/dm_motor.c **** 
 222:control-base/devices/src/dm_motor.c ****     // set the flag to send the data
 223:control-base/devices/src/dm_motor.c ****     motor->send_pending_flag |= DM_MOTOR_SEND_PENDING;
 1047              		.loc 1 223 5 is_stmt 1 view .LVU323
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 23


 1048              		.loc 1 223 10 is_stmt 0 view .LVU324
 1049 00dc E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 1050              		.loc 1 223 30 view .LVU325
 1051 00de 43F00102 		orr	r2, r3, #1
 1052 00e2 E270     		strb	r2, [r4, #3]
 224:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 1053              		.loc 1 224 5 is_stmt 1 view .LVU326
 1054              		.loc 1 224 14 is_stmt 0 view .LVU327
 1055 00e4 A278     		ldrb	r2, [r4, #2]	@ zero_extendqisi2
 1056              		.loc 1 224 8 view .LVU328
 1057 00e6 012A     		cmp	r2, #1
 1058 00e8 04D0     		beq	.L33
 1059              	.L30:
 225:control-base/devices/src/dm_motor.c ****     {
 226:control-base/devices/src/dm_motor.c ****         motor->send_pending_flag |= DM_MOTOR_ENABLE_PENDING; // set the enable pending flag
 227:control-base/devices/src/dm_motor.c ****     }
 228:control-base/devices/src/dm_motor.c **** }
 1060              		.loc 1 228 1 view .LVU329
 1061 00ea 03B0     		add	sp, sp, #12
 1062              	.LCFI18:
 1063              		.cfi_remember_state
 1064              		.cfi_def_cfa_offset 52
 1065              	.LVL85:
 1066              		.loc 1 228 1 view .LVU330
 1067              		@ sp needed
 1068 00ec BDEC048B 		vldm	sp!, {d8-d9}
 1069              	.LCFI19:
 1070              		.cfi_restore 82
 1071              		.cfi_restore 83
 1072              		.cfi_restore 80
 1073              		.cfi_restore 81
 1074              		.cfi_def_cfa_offset 36
 1075              	.LVL86:
 1076              		.loc 1 228 1 view .LVU331
 1077 00f0 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 1078              	.LVL87:
 1079              	.L33:
 1080              	.LCFI20:
 1081              		.cfi_restore_state
 224:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 1082              		.loc 1 224 37 discriminator 1 view .LVU332
 1083 00f4 626A     		ldr	r2, [r4, #36]
 224:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 1084              		.loc 1 224 44 discriminator 1 view .LVU333
 1085 00f6 5278     		ldrb	r2, [r2, #1]	@ zero_extendqisi2
 224:control-base/devices/src/dm_motor.c ****     if (motor->enabled == 1 && motor->stats->state != DM_MOTOR_ENABLED)
 1086              		.loc 1 224 29 discriminator 1 view .LVU334
 1087 00f8 012A     		cmp	r2, #1
 1088 00fa F6D0     		beq	.L30
 226:control-base/devices/src/dm_motor.c ****     }
 1089              		.loc 1 226 9 is_stmt 1 view .LVU335
 226:control-base/devices/src/dm_motor.c ****     }
 1090              		.loc 1 226 34 is_stmt 0 view .LVU336
 1091 00fc 43F00303 		orr	r3, r3, #3
 1092 0100 E370     		strb	r3, [r4, #3]
 1093              		.loc 1 228 1 view .LVU337
 1094 0102 F2E7     		b	.L30
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 24


 1095              	.L35:
 1096              		.align	2
 1097              	.L34:
 1098 0104 00000000 		.word	0
 1099 0108 0000FA43 		.word	1140457472
 1100              		.cfi_endproc
 1101              	.LFE152:
 1103              		.section	.text.DM_Motor_Set_MIT_PD,"ax",%progbits
 1104              		.align	1
 1105              		.global	DM_Motor_Set_MIT_PD
 1106              		.syntax unified
 1107              		.thumb
 1108              		.thumb_func
 1110              	DM_Motor_Set_MIT_PD:
 1111              	.LVL88:
 1112              	.LFB153:
 229:control-base/devices/src/dm_motor.c **** 
 230:control-base/devices/src/dm_motor.c **** void DM_Motor_Set_MIT_PD(DM_Motor_Handle_t *motor, float kp, float kd)
 231:control-base/devices/src/dm_motor.c **** {
 1113              		.loc 1 231 1 is_stmt 1 view -0
 1114              		.cfi_startproc
 1115              		@ args = 0, pretend = 0, frame = 0
 1116              		@ frame_needed = 0, uses_anonymous_args = 0
 1117              		@ link register save eliminated.
 232:control-base/devices/src/dm_motor.c ****     motor->kp = kp;
 1118              		.loc 1 232 5 view .LVU339
 1119              		.loc 1 232 15 is_stmt 0 view .LVU340
 1120 0000 80ED060A 		vstr.32	s0, [r0, #24]
 233:control-base/devices/src/dm_motor.c ****     motor->kd = kd;
 1121              		.loc 1 233 5 is_stmt 1 view .LVU341
 1122              		.loc 1 233 15 is_stmt 0 view .LVU342
 1123 0004 C0ED070A 		vstr.32	s1, [r0, #28]
 234:control-base/devices/src/dm_motor.c **** }
 1124              		.loc 1 234 1 view .LVU343
 1125 0008 7047     		bx	lr
 1126              		.cfi_endproc
 1127              	.LFE153:
 1129              		.section	.text.DM_Motor_Init,"ax",%progbits
 1130              		.align	1
 1131              		.global	DM_Motor_Init
 1132              		.syntax unified
 1133              		.thumb
 1134              		.thumb_func
 1136              	DM_Motor_Init:
 1137              	.LVL89:
 1138              	.LFB154:
 235:control-base/devices/src/dm_motor.c **** 
 236:control-base/devices/src/dm_motor.c **** DM_Motor_Handle_t *DM_Motor_Init(DM_Motor_Config_t *config)
 237:control-base/devices/src/dm_motor.c **** {
 1139              		.loc 1 237 1 is_stmt 1 view -0
 1140              		.cfi_startproc
 1141              		@ args = 0, pretend = 0, frame = 0
 1142              		@ frame_needed = 0, uses_anonymous_args = 0
 1143              		.loc 1 237 1 is_stmt 0 view .LVU345
 1144 0000 38B5     		push	{r3, r4, r5, lr}
 1145              	.LCFI21:
 1146              		.cfi_def_cfa_offset 16
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 25


 1147              		.cfi_offset 3, -16
 1148              		.cfi_offset 4, -12
 1149              		.cfi_offset 5, -8
 1150              		.cfi_offset 14, -4
 1151 0002 0546     		mov	r5, r0
 238:control-base/devices/src/dm_motor.c ****     DM_Motor_Handle_t *motor = malloc(sizeof(DM_Motor_Handle_t));
 1152              		.loc 1 238 5 is_stmt 1 view .LVU346
 1153              		.loc 1 238 32 is_stmt 0 view .LVU347
 1154 0004 2820     		movs	r0, #40
 1155              	.LVL90:
 1156              		.loc 1 238 32 view .LVU348
 1157 0006 FFF7FEFF 		bl	malloc
 1158              	.LVL91:
 1159 000a 0446     		mov	r4, r0
 1160              	.LVL92:
 239:control-base/devices/src/dm_motor.c ****     motor->can_bus = config->can_bus;
 1161              		.loc 1 239 5 is_stmt 1 view .LVU349
 1162              		.loc 1 239 28 is_stmt 0 view .LVU350
 1163 000c 2B78     		ldrb	r3, [r5]	@ zero_extendqisi2
 1164              		.loc 1 239 20 view .LVU351
 1165 000e 0370     		strb	r3, [r0]
 240:control-base/devices/src/dm_motor.c ****     motor->control_mode = config->control_mode;
 1166              		.loc 1 240 5 is_stmt 1 view .LVU352
 1167              		.loc 1 240 33 is_stmt 0 view .LVU353
 1168 0010 6B78     		ldrb	r3, [r5, #1]	@ zero_extendqisi2
 1169              		.loc 1 240 25 view .LVU354
 1170 0012 4370     		strb	r3, [r0, #1]
 241:control-base/devices/src/dm_motor.c ****     motor->enabled = 0;
 1171              		.loc 1 241 5 is_stmt 1 view .LVU355
 1172              		.loc 1 241 20 is_stmt 0 view .LVU356
 1173 0014 0023     		movs	r3, #0
 1174 0016 8370     		strb	r3, [r0, #2]
 242:control-base/devices/src/dm_motor.c ****     motor->tx_id = config->tx_id;
 1175              		.loc 1 242 5 is_stmt 1 view .LVU357
 1176              		.loc 1 242 26 is_stmt 0 view .LVU358
 1177 0018 AB68     		ldr	r3, [r5, #8]
 1178              		.loc 1 242 18 view .LVU359
 1179 001a 8380     		strh	r3, [r0, #4]	@ movhi
 243:control-base/devices/src/dm_motor.c ****     motor->rx_id = config->rx_id;
 1180              		.loc 1 243 5 is_stmt 1 view .LVU360
 1181              		.loc 1 243 26 is_stmt 0 view .LVU361
 1182 001c 6B68     		ldr	r3, [r5, #4]
 1183              		.loc 1 243 18 view .LVU362
 1184 001e C380     		strh	r3, [r0, #6]	@ movhi
 244:control-base/devices/src/dm_motor.c ****     motor->disable_behavior = config->disable_behavior; // by defualt set to zero current
 1185              		.loc 1 244 5 is_stmt 1 view .LVU363
 1186              		.loc 1 244 37 is_stmt 0 view .LVU364
 1187 0020 2B7B     		ldrb	r3, [r5, #12]	@ zero_extendqisi2
 1188              		.loc 1 244 29 view .LVU365
 1189 0022 0372     		strb	r3, [r0, #8]
 245:control-base/devices/src/dm_motor.c **** 
 246:control-base/devices/src/dm_motor.c ****     motor->kp = config->kp;
 1190              		.loc 1 246 5 is_stmt 1 view .LVU366
 1191              		.loc 1 246 23 is_stmt 0 view .LVU367
 1192 0024 6B69     		ldr	r3, [r5, #20]	@ float
 1193              		.loc 1 246 15 view .LVU368
 1194 0026 8361     		str	r3, [r0, #24]	@ float
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 26


 247:control-base/devices/src/dm_motor.c ****     motor->kd = config->kd;
 1195              		.loc 1 247 5 is_stmt 1 view .LVU369
 1196              		.loc 1 247 23 is_stmt 0 view .LVU370
 1197 0028 AB69     		ldr	r3, [r5, #24]	@ float
 1198              		.loc 1 247 15 view .LVU371
 1199 002a C361     		str	r3, [r0, #28]	@ float
 248:control-base/devices/src/dm_motor.c ****     motor->stats = calloc(sizeof(DM_Motor_Stats_t), 1);
 1200              		.loc 1 248 5 is_stmt 1 view .LVU372
 1201              		.loc 1 248 20 is_stmt 0 view .LVU373
 1202 002c 0121     		movs	r1, #1
 1203 002e 2020     		movs	r0, #32
 1204              	.LVL93:
 1205              		.loc 1 248 20 view .LVU374
 1206 0030 FFF7FEFF 		bl	calloc
 1207              	.LVL94:
 1208              		.loc 1 248 18 discriminator 1 view .LVU375
 1209 0034 6062     		str	r0, [r4, #36]
 249:control-base/devices/src/dm_motor.c ****     motor->stats->pos_offset = config->pos_offset;
 1210              		.loc 1 249 5 is_stmt 1 view .LVU376
 1211              		.loc 1 249 38 is_stmt 0 view .LVU377
 1212 0036 2B69     		ldr	r3, [r5, #16]	@ float
 1213              		.loc 1 249 30 view .LVU378
 1214 0038 0361     		str	r3, [r0, #16]	@ float
 250:control-base/devices/src/dm_motor.c **** 
 251:control-base/devices/src/dm_motor.c ****     motor->can_instance = CAN_Device_Register(motor->can_bus, motor->tx_id, motor->rx_id, DM_Motor_
 1215              		.loc 1 251 5 is_stmt 1 view .LVU379
 1216              		.loc 1 251 27 is_stmt 0 view .LVU380
 1217 003a 094B     		ldr	r3, .L39
 1218 003c E288     		ldrh	r2, [r4, #6]
 1219 003e A188     		ldrh	r1, [r4, #4]
 1220 0040 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 1221 0042 FFF7FEFF 		bl	CAN_Device_Register
 1222              	.LVL95:
 1223              		.loc 1 251 25 discriminator 1 view .LVU381
 1224 0046 E060     		str	r0, [r4, #12]
 252:control-base/devices/src/dm_motor.c ****     motor->can_instance->binding_motor_stats = (void *)motor->stats;
 1225              		.loc 1 252 5 is_stmt 1 view .LVU382
 1226              		.loc 1 252 61 is_stmt 0 view .LVU383
 1227 0048 636A     		ldr	r3, [r4, #36]
 1228              		.loc 1 252 46 view .LVU384
 1229 004a 0362     		str	r3, [r0, #32]
 253:control-base/devices/src/dm_motor.c **** 
 254:control-base/devices/src/dm_motor.c ****     g_dm_motors[g_dm_motor_num++] = motor;
 1230              		.loc 1 254 5 is_stmt 1 view .LVU385
 1231              		.loc 1 254 31 is_stmt 0 view .LVU386
 1232 004c 054A     		ldr	r2, .L39+4
 1233 004e 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1234 0050 591C     		adds	r1, r3, #1
 1235 0052 1170     		strb	r1, [r2]
 1236              		.loc 1 254 35 view .LVU387
 1237 0054 044A     		ldr	r2, .L39+8
 1238 0056 42F82340 		str	r4, [r2, r3, lsl #2]
 255:control-base/devices/src/dm_motor.c ****     return motor;
 1239              		.loc 1 255 5 is_stmt 1 view .LVU388
 256:control-base/devices/src/dm_motor.c **** }
 1240              		.loc 1 256 1 is_stmt 0 view .LVU389
 1241 005a 2046     		mov	r0, r4
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 27


 1242 005c 38BD     		pop	{r3, r4, r5, pc}
 1243              	.LVL96:
 1244              	.L40:
 1245              		.loc 1 256 1 view .LVU390
 1246 005e 00BF     		.align	2
 1247              	.L39:
 1248 0060 00000000 		.word	DM_Motor_Decode
 1249 0064 00000000 		.word	g_dm_motor_num
 1250 0068 00000000 		.word	g_dm_motors
 1251              		.cfi_endproc
 1252              	.LFE154:
 1254              		.section	.text.DM_Motor_CtrlPosVel,"ax",%progbits
 1255              		.align	1
 1256              		.global	DM_Motor_CtrlPosVel
 1257              		.syntax unified
 1258              		.thumb
 1259              		.thumb_func
 1261              	DM_Motor_CtrlPosVel:
 1262              	.LFB155:
 257:control-base/devices/src/dm_motor.c **** 
 258:control-base/devices/src/dm_motor.c **** void DM_Motor_CtrlPosVel()
 259:control-base/devices/src/dm_motor.c **** {
 1263              		.loc 1 259 1 is_stmt 1 view -0
 1264              		.cfi_startproc
 1265              		@ args = 0, pretend = 0, frame = 0
 1266              		@ frame_needed = 0, uses_anonymous_args = 0
 1267              		@ link register save eliminated.
 260:control-base/devices/src/dm_motor.c ****     // TODO:
 261:control-base/devices/src/dm_motor.c **** }
 1268              		.loc 1 261 1 view .LVU392
 1269 0000 7047     		bx	lr
 1270              		.cfi_endproc
 1271              	.LFE155:
 1273              		.section	.text.DM_Motor_CtrlVel,"ax",%progbits
 1274              		.align	1
 1275              		.global	DM_Motor_CtrlVel
 1276              		.syntax unified
 1277              		.thumb
 1278              		.thumb_func
 1280              	DM_Motor_CtrlVel:
 1281              	.LFB156:
 262:control-base/devices/src/dm_motor.c **** 
 263:control-base/devices/src/dm_motor.c **** void DM_Motor_CtrlVel()
 264:control-base/devices/src/dm_motor.c **** {
 1282              		.loc 1 264 1 view -0
 1283              		.cfi_startproc
 1284              		@ args = 0, pretend = 0, frame = 0
 1285              		@ frame_needed = 0, uses_anonymous_args = 0
 1286              		@ link register save eliminated.
 265:control-base/devices/src/dm_motor.c ****     // TODO:
 266:control-base/devices/src/dm_motor.c **** }
 1287              		.loc 1 266 1 view .LVU394
 1288 0000 7047     		bx	lr
 1289              		.cfi_endproc
 1290              	.LFE156:
 1292              		.section	.text.DM_Motor_Send,"ax",%progbits
 1293              		.align	1
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 28


 1294              		.global	DM_Motor_Send
 1295              		.syntax unified
 1296              		.thumb
 1297              		.thumb_func
 1299              	DM_Motor_Send:
 1300              	.LFB157:
 267:control-base/devices/src/dm_motor.c **** 
 268:control-base/devices/src/dm_motor.c **** void DM_Motor_Send()
 269:control-base/devices/src/dm_motor.c **** {
 1301              		.loc 1 269 1 view -0
 1302              		.cfi_startproc
 1303              		@ args = 0, pretend = 0, frame = 0
 1304              		@ frame_needed = 0, uses_anonymous_args = 0
 1305 0000 38B5     		push	{r3, r4, r5, lr}
 1306              	.LCFI22:
 1307              		.cfi_def_cfa_offset 16
 1308              		.cfi_offset 3, -16
 1309              		.cfi_offset 4, -12
 1310              		.cfi_offset 5, -8
 1311              		.cfi_offset 14, -4
 270:control-base/devices/src/dm_motor.c ****     for (int i = 0; i < g_dm_motor_num; i++) // loop through all the motors
 1312              		.loc 1 270 5 view .LVU396
 1313              	.LBB3:
 1314              		.loc 1 270 10 view .LVU397
 1315              	.LVL97:
 1316              		.loc 1 270 14 is_stmt 0 view .LVU398
 1317 0002 0024     		movs	r4, #0
 1318              		.loc 1 270 5 view .LVU399
 1319 0004 1AE0     		b	.L44
 1320              	.LVL98:
 1321              	.L51:
 271:control-base/devices/src/dm_motor.c ****     {
 272:control-base/devices/src/dm_motor.c ****         if (g_dm_motors[i]->send_pending_flag & DM_MOTOR_SEND_PENDING)
 273:control-base/devices/src/dm_motor.c ****         {                                               // check if the flag is set
 274:control-base/devices/src/dm_motor.c ****             CAN_Transmit(g_dm_motors[i]->can_instance); // send the data
 1322              		.loc 1 274 13 is_stmt 1 view .LVU400
 1323 0006 D868     		ldr	r0, [r3, #12]
 1324 0008 FFF7FEFF 		bl	CAN_Transmit
 1325              	.LVL99:
 275:control-base/devices/src/dm_motor.c ****             g_dm_motors[i]->send_pending_flag &= ~DM_MOTOR_SEND_PENDING;      // clear the flag
 1326              		.loc 1 275 13 view .LVU401
 1327              		.loc 1 275 24 is_stmt 0 view .LVU402
 1328 000c 214B     		ldr	r3, .L53
 1329 000e 53F82420 		ldr	r2, [r3, r4, lsl #2]
 1330              		.loc 1 275 27 view .LVU403
 1331 0012 D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
 1332              		.loc 1 275 47 view .LVU404
 1333 0014 23F00103 		bic	r3, r3, #1
 1334 0018 D370     		strb	r3, [r2, #3]
 1335 001a 1AE0     		b	.L45
 1336              	.L52:
 276:control-base/devices/src/dm_motor.c ****         }
 277:control-base/devices/src/dm_motor.c ****         if (g_dm_motors[i]->send_pending_flag & DM_MOTOR_ENABLE_PENDING) 
 278:control-base/devices/src/dm_motor.c ****         // Check if enable pending, this flag is set when the motor is enabled by user but motor fe
 279:control-base/devices/src/dm_motor.c ****         {
 280:control-base/devices/src/dm_motor.c ****             DM_Motor_Frame_Enable_Protocol(g_dm_motors[i]);      // Form the enable data with DaMia
 1337              		.loc 1 280 13 is_stmt 1 view .LVU405
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 29


 1338 001c FFF7FEFF 		bl	DM_Motor_Frame_Enable_Protocol
 1339              	.LVL100:
 281:control-base/devices/src/dm_motor.c ****             CAN_Transmit(g_dm_motors[i]->can_instance); // send the data
 1340              		.loc 1 281 13 view .LVU406
 1341              		.loc 1 281 37 is_stmt 0 view .LVU407
 1342 0020 1C4D     		ldr	r5, .L53
 1343 0022 55F82430 		ldr	r3, [r5, r4, lsl #2]
 1344              		.loc 1 281 13 view .LVU408
 1345 0026 D868     		ldr	r0, [r3, #12]
 1346 0028 FFF7FEFF 		bl	CAN_Transmit
 1347              	.LVL101:
 282:control-base/devices/src/dm_motor.c ****             g_dm_motors[i]->send_pending_flag &= ~DM_MOTOR_ENABLE_PENDING;      // clear the flag
 1348              		.loc 1 282 13 is_stmt 1 view .LVU409
 1349              		.loc 1 282 24 is_stmt 0 view .LVU410
 1350 002c 55F82420 		ldr	r2, [r5, r4, lsl #2]
 1351              		.loc 1 282 27 view .LVU411
 1352 0030 D378     		ldrb	r3, [r2, #3]	@ zero_extendqisi2
 1353              		.loc 1 282 47 view .LVU412
 1354 0032 23F00203 		bic	r3, r3, #2
 1355 0036 D370     		strb	r3, [r2, #3]
 1356 0038 12E0     		b	.L46
 1357              	.L47:
 270:control-base/devices/src/dm_motor.c ****     {
 1358              		.loc 1 270 42 is_stmt 1 discriminator 2 view .LVU413
 1359 003a 0134     		adds	r4, r4, #1
 1360              	.LVL102:
 1361              	.L44:
 270:control-base/devices/src/dm_motor.c ****     {
 1362              		.loc 1 270 23 discriminator 1 view .LVU414
 1363 003c 164B     		ldr	r3, .L53+4
 1364 003e 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1365 0040 A342     		cmp	r3, r4
 1366 0042 26DD     		ble	.L50
 272:control-base/devices/src/dm_motor.c ****         {                                               // check if the flag is set
 1367              		.loc 1 272 9 view .LVU415
 272:control-base/devices/src/dm_motor.c ****         {                                               // check if the flag is set
 1368              		.loc 1 272 24 is_stmt 0 view .LVU416
 1369 0044 134B     		ldr	r3, .L53
 1370 0046 53F82430 		ldr	r3, [r3, r4, lsl #2]
 272:control-base/devices/src/dm_motor.c ****         {                                               // check if the flag is set
 1371              		.loc 1 272 27 view .LVU417
 1372 004a DA78     		ldrb	r2, [r3, #3]	@ zero_extendqisi2
 272:control-base/devices/src/dm_motor.c ****         {                                               // check if the flag is set
 1373              		.loc 1 272 12 view .LVU418
 1374 004c 12F0010F 		tst	r2, #1
 1375 0050 D9D1     		bne	.L51
 1376              	.L45:
 277:control-base/devices/src/dm_motor.c ****         // Check if enable pending, this flag is set when the motor is enabled by user but motor fe
 1377              		.loc 1 277 9 is_stmt 1 view .LVU419
 277:control-base/devices/src/dm_motor.c ****         // Check if enable pending, this flag is set when the motor is enabled by user but motor fe
 1378              		.loc 1 277 24 is_stmt 0 view .LVU420
 1379 0052 104B     		ldr	r3, .L53
 1380 0054 53F82400 		ldr	r0, [r3, r4, lsl #2]
 277:control-base/devices/src/dm_motor.c ****         // Check if enable pending, this flag is set when the motor is enabled by user but motor fe
 1381              		.loc 1 277 27 view .LVU421
 1382 0058 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 277:control-base/devices/src/dm_motor.c ****         // Check if enable pending, this flag is set when the motor is enabled by user but motor fe
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 30


 1383              		.loc 1 277 12 view .LVU422
 1384 005a 13F0020F 		tst	r3, #2
 1385 005e DDD1     		bne	.L52
 1386              	.L46:
 283:control-base/devices/src/dm_motor.c ****         }
 284:control-base/devices/src/dm_motor.c ****         if (g_dm_motors[i]->send_pending_flag & DM_MOTOR_DISABLE_PENDING)
 1387              		.loc 1 284 9 is_stmt 1 view .LVU423
 1388              		.loc 1 284 24 is_stmt 0 view .LVU424
 1389 0060 0C4B     		ldr	r3, .L53
 1390 0062 53F82400 		ldr	r0, [r3, r4, lsl #2]
 1391              		.loc 1 284 27 view .LVU425
 1392 0066 C378     		ldrb	r3, [r0, #3]	@ zero_extendqisi2
 1393              		.loc 1 284 12 view .LVU426
 1394 0068 13F0040F 		tst	r3, #4
 1395 006c E5D0     		beq	.L47
 285:control-base/devices/src/dm_motor.c ****         {
 286:control-base/devices/src/dm_motor.c ****             DM_Motor_Frame_Disable_Protocol(g_dm_motors[i]);
 1396              		.loc 1 286 13 is_stmt 1 view .LVU427
 1397 006e FFF7FEFF 		bl	DM_Motor_Frame_Disable_Protocol
 1398              	.LVL103:
 287:control-base/devices/src/dm_motor.c ****             CAN_Transmit(g_dm_motors[i]->can_instance);
 1399              		.loc 1 287 13 view .LVU428
 1400              		.loc 1 287 37 is_stmt 0 view .LVU429
 1401 0072 084D     		ldr	r5, .L53
 1402 0074 55F82430 		ldr	r3, [r5, r4, lsl #2]
 1403              		.loc 1 287 13 view .LVU430
 1404 0078 D868     		ldr	r0, [r3, #12]
 1405 007a FFF7FEFF 		bl	CAN_Transmit
 1406              	.LVL104:
 288:control-base/devices/src/dm_motor.c ****             DM_Motor_Frame_Zero_Current_Protocol(g_dm_motors[i]); // Form the zero current data wit
 1407              		.loc 1 288 13 is_stmt 1 view .LVU431
 1408 007e 55F82400 		ldr	r0, [r5, r4, lsl #2]
 1409 0082 FFF7FEFF 		bl	DM_Motor_Frame_Zero_Current_Protocol
 1410              	.LVL105:
 289:control-base/devices/src/dm_motor.c ****             CAN_Transmit(g_dm_motors[i]->can_instance);
 1411              		.loc 1 289 13 view .LVU432
 1412              		.loc 1 289 37 is_stmt 0 view .LVU433
 1413 0086 55F82430 		ldr	r3, [r5, r4, lsl #2]
 1414              		.loc 1 289 13 view .LVU434
 1415 008a D868     		ldr	r0, [r3, #12]
 1416 008c FFF7FEFF 		bl	CAN_Transmit
 1417              	.LVL106:
 1418 0090 D3E7     		b	.L47
 1419              	.L50:
 1420              		.loc 1 289 13 view .LVU435
 1421              	.LBE3:
 290:control-base/devices/src/dm_motor.c ****             // does not clear the flag, this is to ensure to keep sending so the motor is disabled
 291:control-base/devices/src/dm_motor.c ****         }
 292:control-base/devices/src/dm_motor.c ****     }
 293:control-base/devices/src/dm_motor.c **** }
 1422              		.loc 1 293 1 view .LVU436
 1423 0092 38BD     		pop	{r3, r4, r5, pc}
 1424              	.LVL107:
 1425              	.L54:
 1426              		.loc 1 293 1 view .LVU437
 1427              		.align	2
 1428              	.L53:
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 31


 1429 0094 00000000 		.word	g_dm_motors
 1430 0098 00000000 		.word	g_dm_motor_num
 1431              		.cfi_endproc
 1432              	.LFE157:
 1434              		.global	g_dm_motor_num
 1435              		.section	.bss.g_dm_motor_num,"aw",%nobits
 1438              	g_dm_motor_num:
 1439 0000 00       		.space	1
 1440              		.global	g_dm_motors
 1441              		.section	.bss.g_dm_motors,"aw",%nobits
 1442              		.align	2
 1445              	g_dm_motors:
 1446 0000 00000000 		.space	40
 1446      00000000 
 1446      00000000 
 1446      00000000 
 1446      00000000 
 1447              		.text
 1448              	.Letext0:
 1449              		.file 2 "/Applications/ArmGNUToolchain/14.3.rel1/arm-none-eabi/arm-none-eabi/include/machine/_defa
 1450              		.file 3 "/Applications/ArmGNUToolchain/14.3.rel1/arm-none-eabi/arm-none-eabi/include/sys/_stdint.h
 1451              		.file 4 "control-base/typec-board-base/Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 1452              		.file 5 "control-base/typec-board-base/Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 1453              		.file 6 "control-base/typec-board-base/Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_can.h"
 1454              		.file 7 "control-base/bsp/inc/bsp_can.h"
 1455              		.file 8 "control-base/devices/inc/dm_motor.h"
 1456              		.file 9 "/Applications/ArmGNUToolchain/14.3.rel1/arm-none-eabi/arm-none-eabi/include/stdlib.h"
ARM GAS  /var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s 			page 32


DEFINED SYMBOLS
                            *ABS*:00000000 dm_motor.c
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:21     .text.float_to_uint:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:27     .text.float_to_uint:00000000 float_to_uint
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:66     .text.uint_to_float:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:72     .text.uint_to_float:00000000 uint_to_float
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:111    .text.DM_Motor_Decode:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:117    .text.DM_Motor_Decode:00000000 DM_Motor_Decode
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:250    .text.DM_Motor_Enable_Motor:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:256    .text.DM_Motor_Enable_Motor:00000000 DM_Motor_Enable_Motor
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:281    .text.DM_Motor_Frame_Enable_Protocol:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:287    .text.DM_Motor_Frame_Enable_Protocol:00000000 DM_Motor_Frame_Enable_Protocol
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:332    .text.DM_Motor_Disable_Motor:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:338    .text.DM_Motor_Disable_Motor:00000000 DM_Motor_Disable_Motor
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:381    .text.DM_Motor_Frame_Disable_Protocol:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:387    .text.DM_Motor_Frame_Disable_Protocol:00000000 DM_Motor_Frame_Disable_Protocol
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:431    .text.DM_Motor_Frame_Zero_Current_Protocol:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:437    .text.DM_Motor_Frame_Zero_Current_Protocol:00000000 DM_Motor_Frame_Zero_Current_Protocol
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:587    .text.DM_Motor_Frame_Zero_Current_Protocol:000000c0 $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:593    .text.DM_Motor_Disable_All:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:599    .text.DM_Motor_Disable_All:00000000 DM_Motor_Disable_All
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:649    .text.DM_Motor_Disable_All:00000024 $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1438   .bss.g_dm_motor_num:00000000 g_dm_motor_num
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1445   .bss.g_dm_motors:00000000 g_dm_motors
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:655    .text.DM_Motor_Ctrl_MIT:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:661    .text.DM_Motor_Ctrl_MIT:00000000 DM_Motor_Ctrl_MIT
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:870    .text.DM_Motor_Ctrl_MIT:000000fc $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:876    .text.DM_Motor_Ctrl_MIT_PD:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:882    .text.DM_Motor_Ctrl_MIT_PD:00000000 DM_Motor_Ctrl_MIT_PD
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1098   .text.DM_Motor_Ctrl_MIT_PD:00000104 $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1104   .text.DM_Motor_Set_MIT_PD:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1110   .text.DM_Motor_Set_MIT_PD:00000000 DM_Motor_Set_MIT_PD
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1130   .text.DM_Motor_Init:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1136   .text.DM_Motor_Init:00000000 DM_Motor_Init
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1248   .text.DM_Motor_Init:00000060 $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1255   .text.DM_Motor_CtrlPosVel:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1261   .text.DM_Motor_CtrlPosVel:00000000 DM_Motor_CtrlPosVel
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1274   .text.DM_Motor_CtrlVel:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1280   .text.DM_Motor_CtrlVel:00000000 DM_Motor_CtrlVel
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1293   .text.DM_Motor_Send:00000000 $t
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1299   .text.DM_Motor_Send:00000000 DM_Motor_Send
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1429   .text.DM_Motor_Send:00000094 $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1439   .bss.g_dm_motor_num:00000000 $d
/var/folders/sg/pxk9dyzj7jz_x3889hx3b3dw0000gn/T//ccu8m4S2.s:1442   .bss.g_dm_motors:00000000 $d

UNDEFINED SYMBOLS
malloc
calloc
CAN_Device_Register
CAN_Transmit
